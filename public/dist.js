var genre_data = [{
    "artists": ["REM"],
    "genre_name": "Alternative Rock",
    "avg_vocab": 2974.0,
    "num_artists": 1,
    "total_vocab_len": 2974
}, {
    "artists": ["Green Day"],
    "genre_name": "Punk Rock",
    "avg_vocab": 2535.0,
    "num_artists": 1,
    "total_vocab_len": 2535
}, {
    "artists": ["Bob Marley"],
    "genre_name": "Reggae",
    "avg_vocab": 1867.0,
    "num_artists": 1,
    "total_vocab_len": 1867
}, {
    "artists": ["Julio Iglesias", "Gloria Estefan"],
    "genre_name": "Latin",
    "avg_vocab": 3871.0,
    "num_artists": 2,
    "total_vocab_len": 7742
}, {
    "artists": ["Nirvana"],
    "genre_name": "Grunge",
    "avg_vocab": 1835.0,
    "num_artists": 1,
    "total_vocab_len": 1835
}, {
    "artists": ["Kenny G"],
    "genre_name": "Smooth Jazz",
    "avg_vocab": 809.0,
    "num_artists": 1,
    "total_vocab_len": 809
}, {
    "artists": ["Beyonc\u00e9 Knowles", "Mariah Carey", "Janet Jackson", "Rihanna", "Whitney Houston", "Barry White"],
    "genre_name": "R&B",
    "avg_vocab": 2461.5,
    "num_artists": 6,
    "total_vocab_len": 14769
}, {
    "artists": ["Aerosmith", "Van Halen", "Guns N Roses", "Bon Jovi", "Led Zeppelin", "Scorpions", "Kiss", "ACDC"],
    "genre_name": "Hard Rock",
    "avg_vocab": 2251.875,
    "num_artists": 8,
    "total_vocab_len": 18015
}, {
    "artists": ["Metallica"],
    "genre_name": "Heavy Metal",
    "avg_vocab": 2797.0,
    "num_artists": 1,
    "total_vocab_len": 2797
}, {
    "artists": ["Prince", "Earth Wind and Fire", "Stevie Wonder"],
    "genre_name": "Funk",
    "avg_vocab": 2627.6666666666665,
    "num_artists": 3,
    "total_vocab_len": 7883
}, {
    "artists": ["Robbie Williams", "Bruno Mars"],
    "genre_name": "Pop Rock",
    "avg_vocab": 2328.5,
    "num_artists": 2,
    "total_vocab_len": 4657
}, {
    "artists": ["Garth Brooks", "Taylor Swift", "Kenny Rogers", "Alabama", "George Strait", "Reba McEntire"],
    "genre_name": "Country",
    "avg_vocab": 2441.0,
    "num_artists": 6,
    "total_vocab_len": 14646
}, {
    "artists": ["Aretha Franklin"],
    "genre_name": "Soul",
    "avg_vocab": 2037.0,
    "num_artists": 1,
    "total_vocab_len": 2037
}, {
    "artists": ["Depeche Mode"],
    "genre_name": "Synth Rock",
    "avg_vocab": 1884.0,
    "num_artists": 1,
    "total_vocab_len": 1884
}, {
    "artists": ["The Beatles", "The Rolling Stones", "U2", "Queen", "Eagles",  "The Who", "Bz", "Linda Ronstadt", "Johnny Hallyday", "Rod Stewart", "Santana", "Meat Loaf", "Tina Turner", "Dire Straits", "Bryan Adams", "Tom Petty", "Paul McCartney", "Fleetwood Mac", "Phil Collins", "Foreigner"],
    "genre_name": "Rock",
    "avg_vocab": 2402.7,
    "num_artists": 20,
    "total_vocab_len": 48054
}, {
    "artists": ["Shania Twain"],
    "genre_name": "Country Pop",
    "avg_vocab": 1801.0,
    "num_artists": 1,
    "total_vocab_len": 1801
}, {
    "artists": ["Eminem", "Jay Z", "Tupac Shakur", "Kanye West", "The Black Eyed Peas"],
    "genre_name": "Hip Hop",
    "avg_vocab": 6378.8,
    "num_artists": 5,
    "total_vocab_len": 31894
}, {
    "artists": ["Red Hot Chili Peppers"],
    "genre_name": "Funk Rock",
    "avg_vocab": 3636.0,
    "num_artists": 1,
    "total_vocab_len": 3636
}, {
    "artists": ["Katy Perry", "Michael Jackson", "Lady Gaga", "Britney Spears", "Madonna", "Elton John", "ABBA", "Celine Dion", "Andrea Bocelli", "Barbra Streisand", "Billy Joel",  "Frank Sinatra", "Barry Manilow", "Neil Diamond", "Cher", "The Carpenters", "Olivia Newton-John", "Donna Summer", "George Michael", "The Police", "Bee Gees", "Backstreet Boys", "Lionel Richie", "Spice Girls"],
    "genre_name": "Pop",
    "avg_vocab": 2464.2083333333335,
    "num_artists": 24,
    "total_vocab_len": 59141
}, {
    "artists": ["M\u00f6tley Cr\u00fce"],
    "genre_name": "Glam Metal",
    "avg_vocab": 2343.0,
    "num_artists": 1,
    "total_vocab_len": 2343
}, {
    "artists": ["Elvis Presley"],
    "genre_name": "Rock and Roll",
    "avg_vocab": 2531.0,
    "num_artists": 1,
    "total_vocab_len": 2531
}, {
    "artists": ["New Kids on the Block"],
    "genre_name": "Teen Pop",
    "avg_vocab": 1802.0,
    "num_artists": 1,
    "total_vocab_len": 1802
}, {
    "artists": ["Genesis", "Pink Floyd"],
    "genre_name": "Progressive Rock",
    "avg_vocab": 3287.0,
    "num_artists": 2,
    "total_vocab_len": 6574
}, {
    "artists": ["Bob Dylan"],
    "genre_name": "Folk",
    "avg_vocab": 4883.0,
    "num_artists": 1,
    "total_vocab_len": 4883
}, {
    "artists": ["Enya"],
    "genre_name": "New Age",
    "avg_vocab": 1869.0,
    "num_artists": 1,
    "total_vocab_len": 1869
}];

var vocab_data = [{
	"certified_sales": 116,
	"vocab_len": 8818,
	"name": "Eminem",
	"total_nr_songs": "284",
	"country": "United States",
	"age": "1996–present[142]",
	"total_words": "101848",
	"genre": "Hip hop[142]",
	"start_yr": "1999[142]",
	"total_sales": "155 million[148]",
	"vocab_x_offset": 0,
	"rank_sales": 14,
	"rank_vocab": 1,
	"sales_x_offset": 66,
	"learning_rate": 11.550011340440008,
	"preview_mp3": "https://p.scdn.co/mp3-preview/95b23bb39d4afd0155a0d70e6feac5b78e69d2f0"
}, {
	"certified_sales": 79.8,
	"vocab_len": 6899,
	"name": "Jay Z",
	"total_nr_songs": "238",
	"country": "United States",
	"age": "1996–present[210]",
	"total_words": "82042",
	"genre": "Hip-hop[210]",
	"start_yr": "1996[210]",
	"total_sales": "100 million[211]",
	"vocab_x_offset": 0,
	"rank_sales": 28,
	"rank_vocab": 2,
	"sales_x_offset": 0,
	"learning_rate": 11.891868386722713,
	"preview_mp3": "https://p.scdn.co/mp3-preview/34a42a7e3f598dec3e8e89bcafac7cd239091a62"
}, {
	"certified_sales": 46.2,
	"vocab_len": 6569,
	"name": "Tupac Shakur",
	"total_nr_songs": "398",
	"country": "United States",
	"age": "1988–1996[363]",
	"total_words": "93930",
	"genre": "Hip hop[363]",
	"start_yr": "1991[363]",
	"total_sales": "75 million[364]",
	"vocab_x_offset": 35,
	"rank_sales": 58,
	"rank_vocab": 3,
	"sales_x_offset": 0,
	"learning_rate": 14.298980057847466,
	"preview_mp3": "https://p.scdn.co/mp3-preview/9be5fc446d674be4a980ce36ecc2a88c724e0471"
}, {
	"certified_sales": 94.1,
	"vocab_len": 5069,
	"name": "Kanye West",
	"total_nr_songs": "149",
	"country": "United States",
	"age": "1996–present[185]",
	"total_words": "57806",
	"genre": "Rap / Electronic / Pop rock[185]",
	"start_yr": "2004[185]",
	"total_sales": "121 million[188]",
	"vocab_x_offset": 0,
	"rank_sales": 23,
	"rank_vocab": 4,
	"sales_x_offset": 0,
	"learning_rate": 11.403827184849083,
	"preview_mp3": "https://p.scdn.co/mp3-preview/f890183ccfd5f46ce172da78066231d952b9024d"
}, {
	"certified_sales": 43.6,
	"vocab_len": 4883,
	"name": "Bob Dylan",
	"total_nr_songs": "371",
	"country": "United States",
	"age": "1959–present[253]",
	"total_words": "44625",
	"genre": "Folk / Rock[253]",
	"start_yr": "1963[253]",
	"total_sales": "100 million[254]",
	"vocab_x_offset": -35,
	"rank_sales": 61,
	"rank_vocab": 5,
	"sales_x_offset": 0,
	"learning_rate": 9.138849068195782,
	"preview_mp3": "https://p.scdn.co/mp3-preview/582a3cca28e1932109560ccdcad7d55f3dc12a70"
}, {
	"certified_sales": 54,
	"vocab_len": 4539,
	"name": "The Black Eyed Peas",
	"total_nr_songs": "129",
	"country": "United States",
	"age": "1995–present[336]",
	"total_words": "61531",
	"genre": "Hip-hop / R&B / Dance[336]",
	"start_yr": "1998[336]",
	"total_sales": "76 million[339]",
	"vocab_x_offset": 17,
	"rank_sales": 48,
	"rank_vocab": 6,
	"sales_x_offset": 0,
	"learning_rate": 13.55606961885878,
	"preview_mp3": "https://p.scdn.co/mp3-preview/e8facb52c44ea0affa9b939e9b9af19d65f3c3f9"
}, {
	"certified_sales": 51,
	"vocab_len": 4323,
	"name": "Julio Iglesias",
	"total_nr_songs": "423",
	"country": "Spain",
	"age": "1968–present[197]",
	"total_words": "28848",
	"genre": "Latin[197]",
	"start_yr": "1968[197]",
	"total_sales": "120 million[199]",
	"vocab_x_offset": -55,
	"rank_sales": 51,
	"rank_vocab": 7,
	"sales_x_offset": 0,
	"learning_rate": 6.673143650242887,
	"preview_mp3": "https://p.scdn.co/mp3-preview/3d2e7acb6920a0d012b15b8542cc6a3802c0b272"
}, {
	"certified_sales": 37.4,
	"vocab_len": 4306,
	"name": "Andrea Bocelli",
	"total_nr_songs": "261",
	"country": "Italy",
	"age": "1994–present[377]",
	"total_words": "24610",
	"genre": "Pop / Classical / Opera[377]",
	"start_yr": "1994[377]",
	"total_sales": "75 million[378]",
	"vocab_x_offset": -15,
	"rank_sales": 73,
	"rank_vocab": 8,
	"sales_x_offset": 0,
	"learning_rate": 5.7152810032512775,
	"preview_mp3": "https://p.scdn.co/mp3-preview/c9cdac62458533c14a392a6184e39adeb23afa59"
}, {
	"certified_sales": 72.8,
	"vocab_len": 3959,
	"name": "Bz",
	"total_nr_songs": "327",
	"country": "Japan",
	"age": "1988–present[305]",
	"total_words": "17090",
	"genre": "Rock / Pop rock / Hard rock[305]",
	"start_yr": "1988[305]",
	"total_sales": "80 million[306]",
	"vocab_x_offset": 38,
	"rank_sales": 34,
	"rank_vocab": 9,
	"sales_x_offset": 0,
	"learning_rate": 4.316746653195251,
	"preview_mp3": "https://p.scdn.co/mp3-preview/df35bff5c9135ec287a469866632703559c108d9"
}, {
	"certified_sales": 122,
	"vocab_len": 3954,
	"name": "Celine Dion",
	"total_nr_songs": "335",
	"country": "Canada",
	"age": "1981–present[99]",
	"total_words": "41977",
	"genre": "Pop[99]",
	"start_yr": "1981[99]",
	"total_sales": "200 million[104][105]",
	"vocab_x_offset": -38,
	"rank_sales": 12,
	"rank_vocab": 10,
	"sales_x_offset": 98,
	"learning_rate": 10.616337885685383,
	"preview_mp3": "https://p.scdn.co/mp3-preview/f5496cdc984e2cdf3429249fa86b430c9633a138"
}, {
	"certified_sales": 61.9,
	"vocab_len": 3906,
	"name": "Prince",
	"total_nr_songs": "592",
	"country": "United States",
	"age": "1976–present[230]",
	"total_words": "57771",
	"genre": "Funk / R&B / Pop / Soul / Rock[230]",
	"start_yr": "1978[230]",
	"total_sales": "100 million[233]",
	"vocab_x_offset": 0,
	"rank_sales": 43,
	"rank_vocab": 11,
	"sales_x_offset": 0,
	"learning_rate": 14.790322580645162,
	"preview_mp3": "https://p.scdn.co/mp3-preview/3322607df8a5e996486df174b257b1c1b8431872"
}, {
	"certified_sales": 52.3,
	"vocab_len": 3636,
	"name": "Red Hot Chili Peppers",
	"total_nr_songs": "226",
	"country": "United States",
	"age": "1983–present[314]",
	"total_words": "36166",
	"genre": "Funk rock / Alternative rock[314]",
	"start_yr": "1987[314]",
	"total_sales": "80 million[316]",
	"vocab_x_offset": -70,
	"rank_sales": 49,
	"rank_vocab": 12,
	"sales_x_offset": 0,
	"learning_rate": 9.946644664466447,
	"preview_mp3": "https://p.scdn.co/mp3-preview/abb799838a0eb87a05eae5a3913b8ae95c34308f"
}, {
	"certified_sales": 39.5,
	"vocab_len": 3497,
	"name": "Genesis",
	"total_nr_songs": "215",
	"country": "United Kingdom",
	"age": "1967–1999\n2006–2011[181]",
	"total_words": "35652",
	"genre": "Progressive rock / Pop rock[181]",
	"start_yr": "1969[181]",
	"total_sales": "130 million[182]",
	"vocab_x_offset": 35,
	"rank_sales": 71,
	"rank_vocab": 13,
	"sales_x_offset": 0,
	"learning_rate": 10.19502430654847,
	"preview_mp3": "https://p.scdn.co/mp3-preview/b249f6274afd979a3c1da89b51b38f4e349ad87f"
}, {
	"certified_sales": 35.4,
	"vocab_len": 3419,
	"name": "Gloria Estefan",
	"total_nr_songs": "239",
	"country": "United States",
	"age": "1977–present[294]",
	"total_words": "40053",
	"genre": "Latin / Dance / Pop[294]",
	"start_yr": "1984[294]",
	"total_sales": "90 million[295]",
	"vocab_x_offset": 0,
	"rank_sales": 77,
	"rank_vocab": 14,
	"sales_x_offset": 0,
	"learning_rate": 11.714828897338403,
	"preview_mp3": "https://p.scdn.co/mp3-preview/427a9d5bf564e62db0e412a28c219d62b2eac061"
}, {
	"certified_sales": 66,
	"vocab_len": 3206,
	"name": "Beyoncé Knowles",
	"total_nr_songs": "186",
	"country": "United States",
	"age": "1997–present[340]",
	"total_words": "54044",
	"genre": "R&B / Pop[340]",
	"start_yr": "2002[340][341]",
	"total_sales": "75 million[345]",
	"vocab_x_offset": -40,
	"rank_sales": 41,
	"rank_vocab": 15,
	"sales_x_offset": 0,
	"learning_rate": 16.857142857142858,
	"preview_mp3": "https://p.scdn.co/mp3-preview/d2b4141db025b4e8db53ba5f014007b8d94ed5c5"
}, {
	"certified_sales": 97.1,
	"vocab_len": 3186,
	"name": "Barbra Streisand",
	"total_nr_songs": "496",
	"country": "United States",
	"age": "1960–present[173]",
	"total_words": "33944",
	"genre": "Pop / Adult contemporary[173]",
	"start_yr": "1963[173]",
	"total_sales": "145 million[174]",
	"vocab_x_offset": 63,
	"rank_sales": 21,
	"rank_vocab": 16,
	"sales_x_offset": 0,
	"learning_rate": 10.654111738857502,
	"preview_mp3": "https://p.scdn.co/mp3-preview/8a17c4f89623641d2ac54eee756a7a82e60fd1d3"
}, {
	"certified_sales": 48.2,
	"vocab_len": 3168,
	"name": "Robbie Williams",
	"total_nr_songs": "220",
	"country": "United Kingdom",
	"age": "1990–present[334]",
	"total_words": "35060",
	"genre": "Pop rock[334]",
	"start_yr": "1996[334]",
	"total_sales": "77 million[335]",
	"vocab_x_offset": -78,
	"rank_sales": 55,
	"rank_vocab": 17,
	"sales_x_offset": 0,
	"learning_rate": 11.066919191919192,
	"preview_mp3": "https://p.scdn.co/mp3-preview/699d8d7c0efe3ffb5acd74ee40a0d436a4755201"
}, {
	"certified_sales": 116.2,
	"vocab_len": 3077,
	"name": "Pink Floyd",
	"total_nr_songs": "192",
	"country": "United Kingdom",
	"age": "1965–1996, 2014[85][86]",
	"total_words": "17621",
	"genre": "Progressive rock / Psychedelic rock[85]",
	"start_yr": "1967[85]",
	"total_sales": "250 million[88][89]",
	"vocab_x_offset": 103,
	"rank_sales": 13,
	"rank_vocab": 18,
	"sales_x_offset": -95,
	"learning_rate": 5.726681832954176,
	"preview_mp3": "https://p.scdn.co/mp3-preview/cce05a03c838bbf7fee2b64b3698c229562ce580"
}, {
	"certified_sales": 99.2,
	"vocab_len": 3061,
	"name": "Billy Joel",
	"total_nr_songs": "213",
	"country": "United States",
	"age": "1964–present[163]",
	"total_words": "31886",
	"genre": "Pop / Rock[163]",
	"start_yr": "1971[163]",
	"total_sales": "150 million[165]",
	"vocab_x_offset": 140,
	"rank_sales": 20,
	"rank_vocab": 19,
	"sales_x_offset": 0,
	"learning_rate": 10.416857236197322,
	"preview_mp3": "https://p.scdn.co/mp3-preview/ded5694d43a39b57eb50d61e45c136be7aa67baa"
}, {
	"certified_sales": 129.1,
	"vocab_len": 3059,
	"name": "Mariah Carey",
	"total_nr_songs": "203",
	"country": "United States",
	"age": "1988–present[92]",
	"total_words": "50313",
	"genre": "R&B / Pop / Soul / Hip-hop[92]",
	"start_yr": "1990[92]",
	"total_sales": "200 million[95][96]",
	"vocab_x_offset": -113,
	"rank_sales": 9,
	"rank_vocab": 20,
	"sales_x_offset": 65,
	"learning_rate": 16.447531873161164,
	"preview_mp3": "https://p.scdn.co/mp3-preview/a8980491ba2c8c90be497f3771a93c15371a2dd2"
}, {
	"certified_sales": 41.6,
	"vocab_len": 2974,
	"name": "REM",
	"total_nr_songs": "306",
	"country": "United States",
	"age": "1980–2011[303]",
	"total_words": "28970",
	"genre": "Alternative rock[303]",
	"start_yr": "1983[303]",
	"total_sales": "85 million[304]",
	"vocab_x_offset": -150,
	"rank_sales": 66,
	"rank_vocab": 21,
	"sales_x_offset": 0,
	"learning_rate": 9.741089441829187,
	"preview_mp3": "https://p.scdn.co/mp3-preview/ab2b915b2ed590971395463a754bb13628681b52"
}, {
	"certified_sales": 83,
	"vocab_len": 2958,
	"name": "Aerosmith",
	"total_nr_songs": "221",
	"country": "United States",
	"age": "1970–present[169]",
	"total_words": "34048",
	"genre": "Hard rock[169]",
	"start_yr": "1973[169]",
	"total_sales": "150 million[170]",
	"vocab_x_offset": 177,
	"rank_sales": 26,
	"rank_vocab": 22,
	"sales_x_offset": 0,
	"learning_rate": 11.510480054090602,
	"preview_mp3": "https://p.scdn.co/mp3-preview/03fb5d51d1636c2269636d8cfd36530bb59dee75"
}, {
	"certified_sales": 32.5,
	"vocab_len": 2927,
	"name": "Linda Ronstadt",
	"total_nr_songs": "329",
	"country": "United States",
	"age": "1967–present[276]",
	"total_words": "24589",
	"genre": "Rock / Folk / Country[276]",
	"start_yr": "1968[276]",
	"total_sales": "100 million[277]",
	"vocab_x_offset": -403,
	"rank_sales": 82,
	"rank_vocab": 23,
	"sales_x_offset": 0,
	"learning_rate": 8.400751622822002,
	"preview_mp3": "https://p.scdn.co/mp3-preview/fb534c9e5b639530721d28c2b7a782cf1b9725ce"
}, {
	"certified_sales": 166.6,
	"vocab_len": 2918,
	"name": "Madonna",
	"total_nr_songs": "245",
	"country": "United States",
	"age": "1979–present[62]",
	"total_words": "46967",
	"genre": "Pop / Rock / Dance / Electronica[62]",
	"start_yr": "1982[62]",
	"total_sales": "300 million[66][67]",
	"vocab_x_offset": 428,
	"rank_sales": 4,
	"rank_vocab": 24,
	"sales_x_offset": 35,
	"learning_rate": 16.09561343385881,
	"preview_mp3": "https://p.scdn.co/mp3-preview/e3f2c751d537788f5b0c5a43b0d0b4a5aa23ae26"
}, {
	"certified_sales": 24.3,
	"vocab_len": 2891,
	"name": "Johnny Hallyday",
	"total_nr_songs": "419",
	"country": "France",
	"age": "1957–present[331]",
	"total_words": "29208",
	"genre": "Rock / Pop[331]",
	"start_yr": "1960[331]",
	"total_sales": "80 million[333]",
	"vocab_x_offset": -366,
	"rank_sales": 91,
	"rank_vocab": 25,
	"sales_x_offset": 0,
	"learning_rate": 10.103078519543411,
	"preview_mp3": "https://p.scdn.co/mp3-preview/57535b898c3e3095e72d5774b375dc3c16401446"
}, {
	"certified_sales": 161.8,
	"vocab_len": 2865,
	"name": "Elton John",
	"total_nr_songs": "430",
	"country": "United Kingdom",
	"age": "1964–present[70]",
	"total_words": "35018",
	"genre": "Pop / Rock[70]",
	"start_yr": "1969[70]",
	"total_sales": "300 million[72][73]",
	"vocab_x_offset": 392,
	"rank_sales": 5,
	"rank_vocab": 26,
	"sales_x_offset": 0,
	"learning_rate": 12.222687609075043,
	"preview_mp3": "https://p.scdn.co/mp3-preview/af9c97f58938d0d746b17f12df6f9ac3d1de1a8a"
}, {
	"certified_sales": 142.8,
	"vocab_len": 2829,
	"name": "Garth Brooks",
	"total_nr_songs": "222",
	"country": "United States",
	"age": "1989–present[149]",
	"total_words": "28405",
	"genre": "Country[149]",
	"start_yr": "1989[149]",
	"total_sales": "150 million[150]",
	"vocab_x_offset": -330,
	"rank_sales": 6,
	"rank_vocab": 27,
	"sales_x_offset": 0,
	"learning_rate": 10.040650406504065,
	"preview_mp3": "https://p.scdn.co/mp3-preview/42ff8e1e9db133b549cb4faba8905d0553dad113"
}, {
	"certified_sales": 76.1,
	"vocab_len": 2808,
	"name": "Rod Stewart",
	"total_nr_songs": "352",
	"country": "United Kingdom",
	"age": "1964–present[216]",
	"total_words": "35450",
	"genre": "Rock / Pop[216]",
	"start_yr": "1969[216]",
	"total_sales": "100 million[217]",
	"vocab_x_offset": 355,
	"rank_sales": 30,
	"rank_vocab": 28,
	"sales_x_offset": 0,
	"learning_rate": 12.624643874643874,
	"preview_mp3": "https://p.scdn.co/mp3-preview/ff63e9ecafdeeaaf10ca23f7522a60e6f026e4fa"
}, {
	"certified_sales": 90.2,
	"vocab_len": 2797,
	"name": "Metallica",
	"total_nr_songs": "157",
	"country": "United States",
	"age": "1981–present[202]",
	"total_words": "31141",
	"genre": "Heavy metal / Thrash metal[202]",
	"start_yr": "1983[202]",
	"total_sales": "110 million[205]",
	"vocab_x_offset": -293,
	"rank_sales": 24,
	"rank_vocab": 29,
	"sales_x_offset": 0,
	"learning_rate": 11.133714694315337,
	"preview_mp3": "https://p.scdn.co/mp3-preview/41113bb93fe7a245a752e23b695aa6f5b3eec559"
}, {
	"certified_sales": 94.7,
	"vocab_len": 2794,
	"name": "The Rolling Stones",
	"total_nr_songs": "339",
	"country": "United Kingdom",
	"age": "1962–present[126]",
	"total_words": "32297",
	"genre": "Rock / Blues rock / Pop [126]",
	"start_yr": "1963[126]",
	"total_sales": "200 million[127][128]",
	"vocab_x_offset": 318,
	"rank_sales": 22,
	"rank_vocab": 30,
	"sales_x_offset": 0,
	"learning_rate": 11.559413027916966,
	"preview_mp3": "https://p.scdn.co/mp3-preview/ad861c37005fdb42298e33725325ecca99edfd5e"
}, {
	"certified_sales": 61.2,
	"vocab_len": 2755,
	"name": "Santana",
	"total_nr_songs": "309",
	"country": "United States",
	"age": "1966–present[290]",
	"total_words": "23916",
	"genre": "Rock[290]",
	"start_yr": "1969[290]",
	"total_sales": "90 million[293]",
	"vocab_x_offset": -255,
	"rank_sales": 44,
	"rank_vocab": 31,
	"sales_x_offset": 0,
	"learning_rate": 8.680943738656987,
	"preview_mp3": "https://p.scdn.co/mp3-preview/d58e4a07aaf8c366ab0f1735660533d4fc81fe3b"
}, {
	"certified_sales": 57.8,
	"vocab_len": 2742,
	"name": "ABBA",
	"total_nr_songs": "135",
	"country": "Sweden",
	"age": "1972–1982[129]",
	"total_words": "30071",
	"genre": "Pop / Disco[129]",
	"start_yr": "1972[129]",
	"total_sales": "200 million[138][139]",
	"vocab_x_offset": 280,
	"rank_sales": 47,
	"rank_vocab": 32,
	"sales_x_offset": 0,
	"learning_rate": 10.966812545587162,
	"preview_mp3": "https://p.scdn.co/mp3-preview/8e68458fe7b76db4884e5bb680c0945005aab523"
}, {
	"certified_sales": 37.1,
	"vocab_len": 2725,
	"name": "Frank Sinatra",
	"total_nr_songs": "538",
	"country": "United States",
	"age": "1935–1995[171]",
	"total_words": "23839",
	"genre": "Pop / Swing[171]",
	"start_yr": "1939[171]",
	"total_sales": "150 million[172]",
	"vocab_x_offset": -218,
	"rank_sales": 74,
	"rank_vocab": 33,
	"sales_x_offset": 0,
	"learning_rate": 8.748256880733946,
	"preview_mp3": "https://p.scdn.co/mp3-preview/681cabd79071e6653b32fd810ccc255fa550ba27"
}, {
	"certified_sales": 39.9,
	"vocab_len": 2716,
	"name": "Meat Loaf",
	"total_nr_songs": "168",
	"country": "United States",
	"age": "1968–present[323]",
	"total_words": "43792",
	"genre": "Rock / Hard rock[323]",
	"start_yr": "1977[323]",
	"total_sales": "80 million[324]",
	"vocab_x_offset": 243,
	"rank_sales": 70,
	"rank_vocab": 34,
	"sales_x_offset": 0,
	"learning_rate": 16.123711340206185,
	"preview_mp3": "https://p.scdn.co/mp3-preview/aa11b4a19a809386ff6ade38771fadb52487ceff"
}, {
	"certified_sales": 102.6,
	"vocab_len": 2708,
	"name": "U2",
	"total_nr_songs": "256",
	"country": "Ireland",
	"age": "1976–present[159]",
	"total_words": "29590",
	"genre": "Rock[159]",
	"start_yr": "1980[159]",
	"total_sales": "150 million[162]",
	"vocab_x_offset": -180,
	"rank_sales": 19,
	"rank_vocab": 35,
	"sales_x_offset": 0,
	"learning_rate": 10.926883308714919,
	"preview_mp3": "https://p.scdn.co/mp3-preview/87ee273a8b249a5550da3345e112db48facc74cc"
}, {
	"certified_sales": 103.9,
	"vocab_len": 2668,
	"name": "Queen",
	"total_nr_songs": "160",
	"country": "United Kingdom",
	"age": "1971–present[120]",
	"total_words": "29071",
	"genre": "Rock[120]",
	"start_yr": "1973[120]",
	"total_sales": "200 million[122][123]",
	"vocab_x_offset": 205,
	"rank_sales": 18,
	"rank_vocab": 36,
	"sales_x_offset": 0,
	"learning_rate": 10.896176911544227,
	"preview_mp3": "https://p.scdn.co/mp3-preview/7784471d58e99080e54aa88f30f9412d5204ef0b"
}, {
	"certified_sales": 46.3,
	"vocab_len": 2535,
	"name": "Green Day",
	"total_nr_songs": "208",
	"country": "United States",
	"age": "1987–present[360]",
	"total_words": "27507",
	"genre": "Punk rock / Alternative rock[360]",
	"start_yr": "1994[360]",
	"total_sales": "75 million[362]",
	"vocab_x_offset": -140,
	"rank_sales": 57,
	"rank_vocab": 37,
	"sales_x_offset": 0,
	"learning_rate": 10.850887573964497,
	"preview_mp3": "https://p.scdn.co/mp3-preview/11f6cc57f1287ee01712d57fe43117594d4774ba"
}, {
	"certified_sales": 208.4,
	"vocab_len": 2531,
	"name": "Elvis Presley",
	"total_nr_songs": "461",
	"country": "United States",
	"age": "1954–1977[32]",
	"total_words": "28488",
	"genre": "Rock and roll / Pop / Country[32]",
	"start_yr": "1954[32]",
	"total_sales": "600 million[41][42]\n",
	"vocab_x_offset": 128,
	"rank_sales": 2,
	"rank_vocab": 38,
	"sales_x_offset": 0,
	"learning_rate": 11.255630185697353,
	"preview_mp3": "https://p.scdn.co/mp3-preview/fa7061f7112d69c2352ee904b5425f2d068153c6"
}, {
	"certified_sales": 63.8,
	"vocab_len": 2530,
	"name": "Van Halen",
	"total_nr_songs": "212",
	"country": "United States",
	"age": "1978–present[310]",
	"total_words": "28628",
	"genre": "Hard rock / Heavy metal[310]",
	"start_yr": "1978[310]",
	"total_sales": "80 million[311]",
	"vocab_x_offset": -102,
	"rank_sales": 42,
	"rank_vocab": 39,
	"sales_x_offset": 0,
	"learning_rate": 11.315415019762845,
	"preview_mp3": "https://p.scdn.co/mp3-preview/9063dc9785706f06677ddd900c702a59035a8cc5"
}, {
	"certified_sales": 130.4,
	"vocab_len": 2524,
	"name": "Taylor Swift",
	"total_nr_songs": "105",
	"country": "United States",
	"age": "2006–present[175]",
	"total_words": "37028",
	"genre": "Country / Country pop / Pop / Pop-rock[175]",
	"start_yr": "2006[175]",
	"total_sales": "140 million[180]",
	"vocab_x_offset": 167,
	"rank_sales": 8,
	"rank_vocab": 40,
	"sales_x_offset": -37,
	"learning_rate": 14.670364500792394,
	"preview_mp3": "https://p.scdn.co/mp3-preview/a57dce7e97a6b6a6caa55ad12b772bdc49ee3f8d"
}, {
	"certified_sales": 106.9,
	"vocab_len": 2519,
	"name": "Katy Perry",
	"total_nr_songs": "89",
	"country": "United States",
	"age": "2001–present[288]",
	"total_words": "27478",
	"genre": "Pop / Rock[288]",
	"start_yr": "2008[288]",
	"total_sales": "92 million[289]",
	"vocab_x_offset": -65,
	"rank_sales": 17,
	"rank_vocab": 41,
	"sales_x_offset": 0,
	"learning_rate": 10.908296943231441,
	"preview_mp3": "https://p.scdn.co/mp3-preview/b9fdd806b4baf950febbf4d49ce07b5fc64424da"
}, {
	"certified_sales": 175.4,
	"vocab_len": 2503,
	"name": "Michael Jackson",
	"total_nr_songs": "311",
	"country": "United States",
	"age": "1964–2009[44]",
	"total_words": "51517",
	"genre": "Pop / Rock / Dance / Soul / R&B[44]",
	"start_yr": "1971[44]",
	"total_sales": "400 million[57][58]",
	"vocab_x_offset": 90,
	"rank_sales": 3,
	"rank_vocab": 42,
	"sales_x_offset": 0,
	"learning_rate": 20.58210147822613,
	"preview_mp3": "https://p.scdn.co/mp3-preview/5371616374a56bb4620612fbbc08d89747a04f2a"
}, {
	"certified_sales": 74.4,
	"vocab_len": 2498,
	"name": "Lady Gaga",
	"total_nr_songs": "96",
	"country": "United States",
	"age": "2005–present[312]",
	"total_words": "37288",
	"genre": "Pop / Dance / Electronic/ Rock[312]",
	"start_yr": "2008[312]",
	"total_sales": "80 million[313]",
	"vocab_x_offset": 52,
	"rank_sales": 31,
	"rank_vocab": 43,
	"sales_x_offset": 0,
	"learning_rate": 14.927141713370697,
	"preview_mp3": "https://p.scdn.co/mp3-preview/43ebe6bd3a103f24609d92e3dbbbe2f4dce5c527"
}, {
	"certified_sales": 51,
	"vocab_len": 2483,
	"name": "Janet Jackson",
	"total_nr_songs": "179",
	"country": "United States",
	"age": "1982–present[244]",
	"total_words": "47881",
	"genre": "R&B / Pop[244]",
	"start_yr": "1982[244]",
	"total_sales": "100 million[245]",
	"vocab_x_offset": 15,
	"rank_sales": 52,
	"rank_vocab": 44,
	"sales_x_offset": 0,
	"learning_rate": 19.283527990334274,
	"preview_mp3": "https://p.scdn.co/mp3-preview/3bfd0b12dd3c9ecb6742a17ec7eb6950525ab17a"
}, {
	"certified_sales": 69.2,
	"vocab_len": 2469,
	"name": "Guns N Roses",
	"total_nr_songs": "113",
	"country": "United States",
	"age": "1985–present[227]",
	"total_words": "29844",
	"genre": "Hard rock / Heavy metal[227]",
	"start_yr": "1987[227]",
	"total_sales": "100 million[229]",
	"vocab_x_offset": -27,
	"rank_sales": 38,
	"rank_vocab": 45,
	"sales_x_offset": 0,
	"learning_rate": 12.087484811664641,
	"preview_mp3": "https://p.scdn.co/mp3-preview/85804bbc237e05ae7db9e90b9c0e09527e50d594"
}, {
	"certified_sales": 36.5,
	"vocab_len": 2451,
	"name": "Barry Manilow",
	"total_nr_songs": "378",
	"country": "United States",
	"age": "1973–present[325]",
	"total_words": "30019",
	"genre": "Pop / Soft rock[325]",
	"start_yr": "1973[325]",
	"total_sales": "80 million[326]",
	"vocab_x_offset": -350,
	"rank_sales": 75,
	"rank_vocab": 46,
	"sales_x_offset": 0,
	"learning_rate": 12.24765401876785,
	"preview_mp3": "https://p.scdn.co/mp3-preview/49c60d4d23301e7ffa6f0eeead3ec5381c855b1b"
}, {
	"certified_sales": 58.8,
	"vocab_len": 2433,
	"name": "Kenny Rogers",
	"total_nr_songs": "300",
	"country": "United States",
	"age": "1958–present[234]",
	"total_words": "27622",
	"genre": "Country / Pop[234]",
	"start_yr": "1975[234]",
	"total_sales": "100 million[236]",
	"vocab_x_offset": 285,
	"rank_sales": 45,
	"rank_vocab": 47,
	"sales_x_offset": 0,
	"learning_rate": 11.353062063296342,
	"preview_mp3": "https://p.scdn.co/mp3-preview/827e2ae9a59f4649bb977766230683bb81deeec8"
}, {
	"certified_sales": 47.5,
	"vocab_len": 2432,
	"name": "Alabama",
	"total_nr_songs": "244",
	"country": "United States",
	"age": "1972–present[358]",
	"total_words": "28099",
	"genre": "Country / Pop rock[358]",
	"start_yr": "1980[358]",
	"total_sales": "75 million[359]",
	"vocab_x_offset": 253,
	"rank_sales": 56,
	"rank_vocab": 48,
	"sales_x_offset": 0,
	"learning_rate": 11.553865131578947,
	"preview_mp3": "https://p.scdn.co/mp3-preview/e56702042faef95fc3e20fafa2420c62c6a9cc63"
}, {
	"certified_sales": 126.1,
	"vocab_len": 2400,
	"name": "Rihanna",
	"total_nr_songs": "137",
	"country": "Barbados\nUnited States",
	"age": "2005–present[154]",
	"total_words": "46836",
	"genre": "R&B / Pop / Dance / Hip-hop[154]",
	"start_yr": "2005[154]",
	"total_sales": "150 million[158]",
	"vocab_x_offset": -170,
	"rank_sales": 11,
	"rank_vocab": 49,
	"sales_x_offset": 0,
	"learning_rate": 19.515,
	"preview_mp3": "https://p.scdn.co/mp3-preview/e56702042faef95fc3e20fafa2420c62c6a9cc63"
}, {
	"certified_sales": 27.6,
	"vocab_len": 2343,
	"name": "Mötley Crüe",
	"total_nr_songs": "153",
	"country": "United States",
	"age": "1981–present[384]",
	"total_words": "24346",
	"genre": "Glam metal[384]",
	"start_yr": "1983[384]",
	"total_sales": "75 million[385]",
	"vocab_x_offset": 196,
	"rank_sales": 86,
	"rank_vocab": 50,
	"sales_x_offset": 0,
	"learning_rate": 10.390951771233462,
	"preview_mp3": "https://p.scdn.co/mp3-preview/395fc03936dc7bafdb21934aa128e681aedb0f0b"
}, {
	"certified_sales": 80.5,
	"vocab_len": 2318,
	"name": "Bon Jovi",
	"total_nr_songs": "255",
	"country": "United States",
	"age": "1983–present[206]",
	"total_words": "37276",
	"genre": "Hard rock / Glam metal[206]",
	"start_yr": "1983[206]",
	"total_sales": "100 million[209]",
	"vocab_x_offset": -202,
	"rank_sales": 27,
	"rank_vocab": 51,
	"sales_x_offset": 0,
	"learning_rate": 16.081104400345126,
	"preview_mp3": "https://p.scdn.co/mp3-preview/13d224df83ebc3d2ba66e1a16f965aabc18781d5"
}, {
	"certified_sales": 32.1,
	"vocab_len": 2280,
	"name": "Tina Turner",
	"total_nr_songs": "325",
	"country": "United States",
	"age": "1955–present[278]",
	"total_words": "26094",
	"genre": "Rock / Pop[278]",
	"start_yr": "1975[278]",
	"total_sales": "100 million[279]",
	"vocab_x_offset": -385,
	"rank_sales": 83,
	"rank_vocab": 52,
	"sales_x_offset": 0,
	"learning_rate": 11.444736842105263,
	"preview_mp3": "https://p.scdn.co/mp3-preview/d0fad9dce1b6eba7386ceb75fd9471c88573aea4"
}, {
	"certified_sales": 42.9,
	"vocab_len": 2272,
	"name": "Dire Straits",
	"total_nr_songs": "112",
	"country": "United Kingdom",
	"age": "1977–1995[200]",
	"total_words": "21800",
	"genre": "Rock / Pop[200]",
	"start_yr": "1978[200]",
	"total_sales": "120 million[201]",
	"vocab_x_offset": -295,
	"rank_sales": 64,
	"rank_vocab": 53,
	"sales_x_offset": 0,
	"learning_rate": 9.595070422535212,
	"preview_mp3": "https://p.scdn.co/mp3-preview/629a998a25494f42c64ca7acadcc5b3a9d2221c1"
}, {
	"certified_sales": 72.8,
	"vocab_len": 2250,
	"name": "George Strait",
	"total_nr_songs": "300",
	"country": "United States",
	"age": "1981–present[222]",
	"total_words": "27023",
	"genre": "Country[222]",
	"start_yr": "1984[222]",
	"total_sales": "100 million[223]",
	"vocab_x_offset": 227,
	"rank_sales": 33,
	"rank_vocab": 54,
	"sales_x_offset": 0,
	"learning_rate": 12.010222222222222,
	"preview_mp3": "https://p.scdn.co/mp3-preview/9ae2155e081bd7435e5ba305ef14960e154a56bc"
}, {
	"certified_sales": 127.9,
	"vocab_len": 2201,
	"name": "Eagles",
	"total_nr_songs": "105",
	"country": "United States",
	"age": "1971–present[151]",
	"total_words": "21625",
	"genre": "Rock[151]",
	"start_yr": "1972[151]",
	"total_sales": "150 million[153]",
	"vocab_x_offset": 310,
	"rank_sales": 10,
	"rank_vocab": 55,
	"sales_x_offset": -72,
	"learning_rate": 9.825079509313948,
	"preview_mp3": "https://p.scdn.co/mp3-preview/3b972bba57d54f2eebdfcce9bd85d8b6054ec0c3"
}, {
	"certified_sales": 67.1,
	"vocab_len": 2193,
	"name": "Neil Diamond",
	"total_nr_songs": "393",
	"country": "United States",
	"age": "1966–present[183]",
	"total_words": "29685",
	"genre": "Pop / Rock[183]",
	"start_yr": "1966[183]",
	"total_sales": "125 million[184]",
	"vocab_x_offset": -422,
	"rank_sales": 40,
	"rank_vocab": 56,
	"sales_x_offset": 0,
	"learning_rate": 13.53625170998632,
	"preview_mp3": "https://p.scdn.co/mp3-preview/e146e5c77e4cce9615820c6b6606aa1c54985b58"
}, {
	"certified_sales": 42.2,
	"vocab_len": 2178,
	"name": "Reba McEntire",
	"total_nr_songs": "298",
	"country": "United States",
	"age": "1975–present[321]",
	"total_words": "29462",
	"genre": "Country / Country Pop[321]",
	"start_yr": "1987[321]",
	"total_sales": "80 million[322]",
	"vocab_x_offset": -232,
	"rank_sales": 65,
	"rank_vocab": 57,
	"sales_x_offset": 0,
	"learning_rate": 13.527089072543617,
	"preview_mp3": "https://p.scdn.co/mp3-preview/313ed12c5f6502e4dc1e6abe9976f059f0d08ae8"
}, {
	"certified_sales": 40.4,
	"vocab_len": 2163,
	"name": "Cher",
	"total_nr_songs": "289",
	"country": "United States",
	"age": "1964–present[264]",
	"total_words": "30633",
	"genre": "Pop / Rock / Dance / Folk[264]",
	"start_yr": "1965[264]",
	"total_sales": "100 million[268]",
	"vocab_x_offset": 342,
	"rank_sales": 68,
	"rank_vocab": 58,
	"sales_x_offset": 0,
	"learning_rate": 14.162274618585299,
	"preview_mp3": "https://p.scdn.co/mp3-preview/df6603f1763e91893cbc7ecf0c1e2a4691166bad"
}, {
	"certified_sales": 77.1,
	"vocab_len": 2141,
	"name": "Britney Spears",
	"total_nr_songs": "176",
	"country": "United States",
	"age": "1998–present[212]",
	"total_words": "44028",
	"genre": "Pop / Dance / Dance-pop[212]",
	"start_yr": "1998[212]",
	"total_sales": "100 million[215]",
	"vocab_x_offset": -263,
	"rank_sales": 29,
	"rank_vocab": 59,
	"sales_x_offset": 0,
	"learning_rate": 20.56422232601588,
	"preview_mp3": "https://p.scdn.co/mp3-preview/f4c3182b6dba991391d3d5d5ba712b3d340b0a92"
}, {
	"certified_sales": 34.9,
	"vocab_len": 2114,
	"name": "Earth Wind and Fire",
	"total_nr_songs": "327",
	"country": "United States",
	"age": "1969–present[296]",
	"total_words": "30642",
	"genre": "Funk / R&B / Soul[296]",
	"start_yr": "1971[296]",
	"total_sales": "90 million[299]",
	"vocab_x_offset": 374,
	"rank_sales": 78,
	"rank_vocab": 60,
	"sales_x_offset": 0,
	"learning_rate": 14.494796594134343,
	"preview_mp3": "https://p.scdn.co/mp3-preview/2b8779cf6173d3617d7b1ff8215304c6a9530aaf"
}, {
	"certified_sales": 45.9,
	"vocab_len": 2109,
	"name": "The Carpenters",
	"total_nr_songs": "179",
	"country": "United States",
	"age": "1969–1983[250]",
	"total_words": "22568",
	"genre": "Pop[250]",
	"start_yr": "1969[250]",
	"total_sales": "100 million[252]",
	"vocab_x_offset": 38,
	"rank_sales": 59,
	"rank_vocab": 61,
	"sales_x_offset": 0,
	"learning_rate": 10.700806069227122,
	"preview_mp3": "https://p.scdn.co/mp3-preview/42a3acbf4eb1c22370ad3466679aa33dc2212a74"
}, {
	"certified_sales": 138.5,
	"vocab_len": 2077,
	"name": "Led Zeppelin",
	"total_nr_songs": "169",
	"country": "United Kingdom",
	"age": "1968–1980[76]",
	"total_words": "23779",
	"genre": "Hard rock / Heavy metal[76]",
	"start_yr": "1969[76]",
	"total_sales": "300 million[81][82]",
	"vocab_x_offset": -460,
	"rank_sales": 7,
	"rank_vocab": 62,
	"sales_x_offset": 35,
	"learning_rate": 11.448724121328839,
	"preview_mp3": "https://p.scdn.co/mp3-preview/752da50bddc3a4352a6ad3548735dad34e3ebe63"
}, {
	"certified_sales": 43.1,
	"vocab_len": 2055,
	"name": "Bryan Adams",
	"total_nr_songs": "190",
	"country": "Canada",
	"age": "1979–present[257]",
	"total_words": "28806",
	"genre": "Rock[257]",
	"start_yr": "1979[257]",
	"total_sales": "100 million[258]",
	"vocab_x_offset": 406,
	"rank_sales": 63,
	"rank_vocab": 63,
	"sales_x_offset": 0,
	"learning_rate": 14.017518248175183,
	"preview_mp3": "https://p.scdn.co/mp3-preview/ca4663322a851f5a0dec23cedfc91b6d516b13f9"
}, {
	"certified_sales": 24.5,
	"vocab_len": 2037,
	"name": "Aretha Franklin",
	"total_nr_songs": "276",
	"country": "United States",
	"age": "1956–present[390]",
	"total_words": "32826",
	"genre": "Soul / Jazz / Blues / R&B[390]",
	"start_yr": "1961[390]",
	"total_sales": "75 million[391]",
	"vocab_x_offset": 5,
	"rank_sales": 90,
	"rank_vocab": 64,
	"sales_x_offset": 0,
	"learning_rate": 16.114874815905743,
	"preview_mp3": "https://p.scdn.co/mp3-preview/a0a0a5d876c3d99ef20e9f182cb008313dfc5953"
}, {
	"certified_sales": 34.4,
	"vocab_len": 2030,
	"name": "Tom Petty",
	"total_nr_songs": "240",
	"country": "United States",
	"age": "1976–present[327]",
	"total_words": "24633",
	"genre": "Rock[327]",
	"start_yr": "1977[327]",
	"total_sales": "80 million[328]",
	"vocab_x_offset": 500,
	"rank_sales": 80,
	"rank_vocab": 65,
	"sales_x_offset": 0,
	"learning_rate": 12.13448275862069,
	"preview_mp3": "https://p.scdn.co/mp3-preview/da7dc422d21f7a706fad27b2420bb74802030618"
}, {
	"certified_sales": 34.7,
	"vocab_len": 2015,
	"name": "Olivia Newton-John",
	"total_nr_songs": "286",
	"country": "Australia",
	"age": "1966–present[272]",
	"total_words": "27203",
	"genre": "Pop[272]",
	"start_yr": "1966[272]",
	"total_sales": "100 million[273]",
	"vocab_x_offset": -27,
	"rank_sales": 79,
	"rank_vocab": 66,
	"sales_x_offset": 0,
	"learning_rate": 13.500248138957817,
	"preview_mp3": "https://p.scdn.co/mp3-preview/69dc71a09cd4b9e5e23a01cb144dd3512715c1f7"
}, {
	"certified_sales": 30.8,
	"vocab_len": 1999,
	"name": "Donna Summer",
	"total_nr_songs": "210",
	"country": "United States",
	"age": "1968–2012[280]",
	"total_words": "30920",
	"genre": "Pop / Disco / R&B[280]",
	"start_yr": "1974[280]",
	"total_sales": "100 million[281]",
	"vocab_x_offset": 70,
	"rank_sales": 84,
	"rank_vocab": 67,
	"sales_x_offset": 0,
	"learning_rate": 15.467733866933466,
	"preview_mp3": "https://p.scdn.co/mp3-preview/332fb47e0f14333ce0f11539c8c81d03c6d81f10"
}, {
	"certified_sales": 43.5,
	"vocab_len": 1975,
	"name": "George Michael",
	"total_nr_songs": "99",
	"country": "United Kingdom",
	"age": "1981–present[255]",
	"total_words": "27838",
	"genre": "Pop[255]",
	"start_yr": "1984[255]",
	"total_sales": "100 million[256]",
	"vocab_x_offset": -60,
	"rank_sales": 62,
	"rank_vocab": 68,
	"sales_x_offset": 0,
	"learning_rate": 14.095189873417722,
	"preview_mp3": "https://p.scdn.co/mp3-preview/885021ec9b6ac110238a9463bdcc0dc6d4778cecs"
}, {
	"certified_sales": 18.9,
	"vocab_len": 1954,
	"name": "Scorpions",
	"total_nr_songs": "233",
	"country": "Germany",
	"age": "1965–present[392]",
	"total_words": "28840",
	"genre": "Hard rock[392]",
	"start_yr": "1978[392]",
	"total_sales": "75 million[393]",
	"vocab_x_offset": 97,
	"rank_sales": 93,
	"rank_vocab": 69,
	"sales_x_offset": 0,
	"learning_rate": 14.759467758444217,
	"preview_mp3": "https://p.scdn.co/mp3-preview/d9cf8857c53e4f3482517df14d11aacf45fe66f8"
}, {
	"certified_sales": 26.8,
	"vocab_len": 1921,
	"name": "Kiss",
	"total_nr_songs": "238",
	"country": "United States",
	"age": "1972–present[386]",
	"total_words": "32094",
	"genre": "Hard rock / Heavy metal[386]",
	"start_yr": "1974[386]",
	"total_sales": "75 million[387]",
	"vocab_x_offset": -96,
	"rank_sales": 87,
	"rank_vocab": 70,
	"sales_x_offset": 0,
	"learning_rate": 16.706923477355545,
	"preview_mp3": "https://p.scdn.co/mp3-preview/7df55d8ca83351399071954210c4b69cb2199906"
}, {
	"certified_sales": 57.9,
	"vocab_len": 1903,
	"name": "Paul McCartney",
	"total_nr_songs": "604",
	"country": "United Kingdom",
	"age": "1960–present[237]",
	"total_words": "24232",
	"genre": "Rock[237]",
	"start_yr": "1970[237]",
	"total_sales": "100 million[243]",
	"vocab_x_offset": 130,
	"rank_sales": 46,
	"rank_vocab": 71,
	"sales_x_offset": 0,
	"learning_rate": 12.733578560168155,
	"preview_mp3": "https://p.scdn.co/mp3-preview/ca0fa81b146e6af69a28175a2a358717830cff50"
}, {
	"certified_sales": 111.3,
	"vocab_len": 1890,
	"name": "Whitney Houston",
	"total_nr_songs": "191",
	"country": "United States",
	"age": "1977–2012[108]",
	"total_words": "36323",
	"genre": "R&B / Soul / Pop[108]",
	"start_yr": "1984[108]",
	"total_sales": "200 million[111][112]",
	"vocab_x_offset": -133,
	"rank_sales": 16,
	"rank_vocab": 72,
	"sales_x_offset": 0,
	"learning_rate": 19.21851851851852,
	"preview_mp3": "https://p.scdn.co/mp3-preview/8f7b6745580f5264b3ab679e2661ddfb8a333714"
}, {
	"certified_sales": 38.2,
	"vocab_len": 1885,
	"name": "The Police",
	"total_nr_songs": "161",
	"country": "United Kingdom",
	"age": "1977-1986–present[372]",
	"total_words": "25072",
	"genre": "Pop / Rock[372]",
	"start_yr": "1978[372]",
	"total_sales": "75 million[376]",
	"vocab_x_offset": 465,
	"rank_sales": 72,
	"rank_vocab": 73,
	"sales_x_offset": 0,
	"learning_rate": 13.300795755968169,
	"preview_mp3": "https://p.scdn.co/mp3-preview/e231d70090a2107419435c44bd725fa923c23090"
}, {
	"certified_sales": 26.3,
	"vocab_len": 1884,
	"name": "Depeche Mode",
	"total_nr_songs": "193",
	"country": "United Kingdom",
	"age": "1980–present[388]",
	"total_words": "22354",
	"genre": "Synth rock / Electronic[388]",
	"start_yr": "1981[388]",
	"total_sales": "75 million[389]",
	"vocab_x_offset": 167,
	"rank_sales": 88,
	"rank_vocab": 74,
	"sales_x_offset": 0,
	"learning_rate": 11.865180467091296,
	"preview_mp3": "https://p.scdn.co/mp3-preview/51a8374c507c56951d42de83805978e3e0565e1b"
}, {
	"certified_sales": 67.3,
	"vocab_len": 1882,
	"name": "Bee Gees",
	"total_nr_songs": "370",
	"country": "United Kingdom",
	"age": "1963–2003\n2009–2012[193]",
	"total_words": "35502",
	"genre": "Pop / Disco[193]",
	"start_yr": "1963[193]",
	"total_sales": "120 million[196]",
	"vocab_x_offset": -170,
	"rank_sales": 39,
	"rank_vocab": 75,
	"sales_x_offset": 0,
	"learning_rate": 18.863974495217853,
	"preview_mp3": "https://p.scdn.co/mp3-preview/48995c0af9fd239515b62047aeca0ce21cb03f17"
}, {
	"certified_sales": 264.9,
	"vocab_len": 1872,
	"name": "The Beatles",
	"total_nr_songs": "273",
	"country": "United Kingdom",
	"age": "1960–1970[5]",
	"total_words": "26437",
	"genre": "Rock / Pop[5]",
	"start_yr": "1962[5]",
	"total_sales": "600 million[30][31]",
	"vocab_x_offset": 204,
	"rank_sales": 1,
	"rank_vocab": 76,
	"sales_x_offset": 0,
	"learning_rate": 14.12232905982906,
	"preview_mp3": "https://p.scdn.co/mp3-preview/91dce87c97ece764c03e0d2cb7cc2b03efaf45c8"
}, {
	"certified_sales": 48.7,
	"vocab_len": 1869,
	"name": "Enya",
	"total_nr_songs": "174",
	"country": "Ireland",
	"age": "1982–present[353]",
	"total_words": "13371",
	"genre": "New-age / Celtic[353]",
	"start_yr": "1987[353]",
	"total_sales": "75 million[357]",
	"vocab_x_offset": -206,
	"rank_sales": 54,
	"rank_vocab": 77,
	"sales_x_offset": 0,
	"learning_rate": 7.154093097913322,
	"preview_mp3": "https://p.scdn.co/mp3-preview/4164aefbe2c3a06e0c341b3b00ef82724c293f49"
}, {
	"certified_sales": 36,
	"vocab_len": 1867,
	"name": "Bob Marley",
	"total_nr_songs": "173",
	"country": "Jamaica",
	"age": "1962–1981[379]",
	"total_words": "26525",
	"genre": "Reggae[379]",
	"start_yr": "1975[379]",
	"total_sales": "75 million[383]",
	"vocab_x_offset": 240,
	"rank_sales": 76,
	"rank_vocab": 78,
	"sales_x_offset": 0,
	"learning_rate": 14.20728441349759,
	"preview_mp3": "https://p.scdn.co/mp3-preview/9e51018d1007e09b6acf83c5c02d5d1eae532e15"
}, {
	"certified_sales": 33.8,
	"vocab_len": 1863,
	"name": "Stevie Wonder",
	"total_nr_songs": "338",
	"country": "United States",
	"age": "1961–present[274]",
	"total_words": "18897",
	"genre": "Funk / R&B / Soul[274]",
	"start_yr": "1962[274]",
	"total_sales": "100 million[275]",
	"vocab_x_offset": -243,
	"rank_sales": 81,
	"rank_vocab": 79,
	"sales_x_offset": 0,
	"learning_rate": 10.143317230273752,
	"preview_mp3": "https://p.scdn.co/mp3-preview/3ea4a9423b7c90fade8d9822febb4cf954c65303"
}, {
	"certified_sales": 70.9,
	"vocab_len": 1855,
	"name": "Backstreet Boys",
	"total_nr_songs": "149",
	"country": "United States",
	"age": "1993–present[224]",
	"total_words": "39135",
	"genre": "Pop[224]",
	"start_yr": "1995[224]",
	"total_sales": "100 million[226]",
	"vocab_x_offset": 278,
	"rank_sales": 37,
	"rank_vocab": 80,
	"sales_x_offset": 0,
	"learning_rate": 21.097035040431265,
	"preview_mp3": "https://p.scdn.co/mp3-preview/8b8e07f6566d960cb853cc5de37777de677c20c5"
}, {
	"certified_sales": 73.7,
	"vocab_len": 1850,
	"name": "Fleetwood Mac",
	"total_nr_songs": "332",
	"country": "United Kingdom\nUnited States",
	"age": "1967–present[218]",
	"total_words": "27629",
	"genre": "Rock / Pop[218]",
	"start_yr": "1968[218]",
	"total_sales": "100 million[221]",
	"vocab_x_offset": -280,
	"rank_sales": 32,
	"rank_vocab": 81,
	"sales_x_offset": 0,
	"learning_rate": 14.934594594594595,
	"preview_mp3": "https://p.scdn.co/mp3-preview/e5f2c9ba1c1f48d8f9db8e88ac88852bdb198d89"
}, {
	"certified_sales": 85.5,
	"vocab_len": 1848,
	"name": "Phil Collins",
	"total_nr_songs": "247",
	"country": "United Kingdom",
	"age": "1980–2011[166]",
	"total_words": "31022",
	"genre": "Rock / Progressive rock / Adult contemporary[166]",
	"start_yr": "1981[166]",
	"total_sales": "150 million[168]",
	"vocab_x_offset": 314,
	"rank_sales": 25,
	"rank_vocab": 82,
	"sales_x_offset": 0,
	"learning_rate": 16.786796536796537,
	"preview_mp3": "https://p.scdn.co/mp3-preview/3f7ab9e3b8fbe43fa4ff3f09a0ce9007f98ebe07"
}, {
	"certified_sales": 43.9,
	"vocab_len": 1835,
	"name": "Nirvana",
	"total_nr_songs": "143",
	"country": "United States",
	"age": "1987–1994[365]",
	"total_words": "21265",
	"genre": "Grunge / Alternative rock[365]",
	"start_yr": "1989[365]",
	"total_sales": "75 million[368]",
	"vocab_x_offset": -316,
	"rank_sales": 60,
	"rank_vocab": 83,
	"sales_x_offset": 0,
	"learning_rate": 11.588555858310627,
	"preview_mp3": "https://p.scdn.co/mp3-preview/772ffad6933bca2da0c8c7297c48b0be03398026"
}, {
	"certified_sales": 30.2,
	"vocab_len": 1802,
	"name": "New Kids on the Block",
	"total_nr_songs": "86",
	"country": "United States",
	"age": "1984–present[329]",
	"total_words": "27619",
	"genre": "Teen pop[329]",
	"start_yr": "1986[329]",
	"total_sales": "80 million[330]",
	"vocab_x_offset": 350,
	"rank_sales": 85,
	"rank_vocab": 84,
	"sales_x_offset": 0,
	"learning_rate": 15.326859045504994,
	"preview_mp3": "https://p.scdn.co/mp3-preview/83495e0c2902ef2ee10cafd7be997492561dfe1b"
}, {
	"certified_sales": 72.6,
	"vocab_len": 1801,
	"name": "Shania Twain",
	"total_nr_songs": "101",
	"country": "Canada",
	"age": "1993–present[300]",
	"total_words": "22823",
	"genre": "Country pop[300]",
	"start_yr": "1993[300]",
	"total_sales": "85 million[302]",
	"vocab_x_offset": -352,
	"rank_sales": 35,
	"rank_vocab": 85,
	"sales_x_offset": 0,
	"learning_rate": 12.672404219877846,
	"preview_mp3": "https://p.scdn.co/mp3-preview/bf3e8bc60fc2d627aef70aa8ef857b03fb525f9b"
}, {
	"certified_sales": 25.3,
	"vocab_len": 1794,
	"name": "The Who",
	"total_nr_songs": "283",
	"country": "United Kingdom",
	"age": "1964–present[284]",
	"total_words": "17821",
	"genre": "Rock / Hard rock[284]",
	"start_yr": "1965[284]",
	"total_sales": "100 million[285]",
	"vocab_x_offset": 388,
	"rank_sales": 89,
	"rank_vocab": 86,
	"sales_x_offset": 0,
	"learning_rate": 9.933667781493869,
	"preview_mp3": "https://p.scdn.co/mp3-preview/d1aca9dad7602fd5a5feb6c30ad68d8796c08c87"
}, {
	"certified_sales": 111.5,
	"vocab_len": 1788,
	"name": "ACDC",
	"total_nr_songs": "184",
	"country": "Australia",
	"age": "1973–present[115]",
	"total_words": "15531",
	"genre": "Hard rock / Blues rock / Rock and roll[115]",
	"start_yr": "1975[115]",
	"total_sales": "200 million[116][117]",
	"vocab_x_offset": -390,
	"rank_sales": 15,
	"rank_vocab": 87,
	"sales_x_offset": -62,
	"learning_rate": 8.686241610738255,
	"preview_mp3": "https://p.scdn.co/mp3-preview/89aa5e4a040dd7f4e66fe707db7143e95f607b25"
}, {
	"certified_sales": 21.7,
	"vocab_len": 1731,
	"name": "Barry White",
	"total_nr_songs": "250",
	"country": "United States",
	"age": "1972–2003[286]",
	"total_words": "23277",
	"genre": "R&B / Soul[286]",
	"start_yr": "1973[286]",
	"total_sales": "100 million[287]",
	"vocab_x_offset": 426,
	"rank_sales": 92,
	"rank_vocab": 88,
	"sales_x_offset": 0,
	"learning_rate": 13.447140381282496,
	"preview_mp3": "https://p.scdn.co/mp3-preview/659c8fd5bdcfa1866166569b0ba2586c0db84274"
}, {
	"certified_sales": 49.1,
	"vocab_len": 1723,
	"name": "Foreigner",
	"total_nr_songs": "120",
	"country": "United States\nUnited Kingdom",
	"age": "1976–present[317]",
	"total_words": "29610",
	"genre": "Rock / Hard Rock[317]",
	"start_yr": "1977[317]",
	"total_sales": "80 million[318]",
	"vocab_x_offset": -428,
	"rank_sales": 53,
	"rank_vocab": 89,
	"sales_x_offset": 0,
	"learning_rate": 17.18514219384794,
	"preview_mp3": "https://p.scdn.co/mp3-preview/c146ec133f62da2e361f475388cff6505f1c5f16"
}, {
	"certified_sales": 40,
	"vocab_len": 1699,
	"name": "Lionel Richie",
	"total_nr_songs": "167",
	"country": "United States",
	"age": "1968–present[269]",
	"total_words": "32746",
	"genre": "Pop / R&B[269]",
	"start_yr": "1981[269]",
	"total_sales": "100 million[271]",
	"vocab_x_offset": -465,
	"rank_sales": 69,
	"rank_vocab": 90,
	"sales_x_offset": 0,
	"learning_rate": 19.273690406121247,
	"preview_mp3": "https://p.scdn.co/mp3-preview/aee83deecf56ab2c5d94301c9d975166e950ff11"
}, {
	"certified_sales": 41.1,
	"vocab_len": 1497,
	"name": "Spice Girls",
	"total_nr_songs": "55",
	"country": "United Kingdom",
	"age": "1996–2000\n2007–2008[369]",
	"total_words": "24949",
	"genre": "Pop / Dance-pop[369]",
	"start_yr": "1996[369]",
	"total_sales": "75 million[371]",
	"vocab_x_offset": -492,
	"rank_sales": 67,
	"rank_vocab": 91,
	"sales_x_offset": 0,
	"learning_rate": 16.665998663994657,
	"preview_mp3": "https://p.scdn.co/mp3-preview/640b1a73f6bf6d3367a3c393b7dc3529837f34af"
}, {
	"certified_sales": 72.1,
	"vocab_len": 1489,
	"name": "Bruno Mars",
	"total_nr_songs": "56",
	"country": "United States",
	"age": "2004–present[307]",
	"total_words": "18621",
	"genre": "Pop rock / R&B[307]",
	"start_yr": "2010[307]",
	"total_sales": "80 million[309]",
	"vocab_x_offset": 490,
	"rank_sales": 36,
	"rank_vocab": 92,
	"sales_x_offset": 0,
	"learning_rate": 12.505708529214237,
	"preview_mp3": "https://p.scdn.co/mp3-preview/a1cbeac22a19ef6e74b9b0bc3c893a4f9d1d3185"
}, {
	"certified_sales": 52,
	"vocab_len": 809,
	"name": "Kenny G",
	"total_nr_songs": "232",
	"country": "United States",
	"age": "1982–present[351]",
	"total_words": "5016",
	"genre": "Smooth jazz[351]",
	"start_yr": "1984[351]",
	"total_sales": "75 million[352]",
	"vocab_x_offset": 0,
	"rank_sales": 50,
	"rank_vocab": 93,
	"sales_x_offset": 0,
	"learning_rate": 6.200247218788628,
	"preview_mp3": "https://p.scdn.co/mp3-preview/ea1c9c30e81843a33dbfb5c0f89d9ae717a71dc0"
}];
/*
 * jQuery Easing v1.3 - http://gsgd.co.uk/sandbox/jquery/easing/
 *
 * Uses the built in easing capabilities added In jQuery 1.1
 * to offer multiple easing options
 *
 * TERMS OF USE - jQuery Easing
 * 
 * Open source under the BSD License. 
 * 
 * Copyright © 2008 George McGinley Smith
 * All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without modification, 
 * are permitted provided that the following conditions are met:
 * 
 * Redistributions of source code must retain the above copyright notice, this list of 
 * conditions and the following disclaimer.
 * Redistributions in binary form must reproduce the above copyright notice, this list 
 * of conditions and the following disclaimer in the documentation and/or other materials 
 * provided with the distribution.
 * 
 * Neither the name of the author nor the names of contributors may be used to endorse 
 * or promote products derived from this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY 
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
 *  COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 *  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
 *  GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED 
 * AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 *  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED 
 * OF THE POSSIBILITY OF SUCH DAMAGE. 
 *
*/

// t: current time, b: begInnIng value, c: change In value, d: duration
jQuery.easing['jswing'] = jQuery.easing['swing'];

jQuery.extend( jQuery.easing,
{
	def: 'easeOutQuad',
	swing: function (x, t, b, c, d) {
		//alert(jQuery.easing.default);
		return jQuery.easing[jQuery.easing.def](x, t, b, c, d);
	},
	easeInQuad: function (x, t, b, c, d) {
		return c*(t/=d)*t + b;
	},
	easeOutQuad: function (x, t, b, c, d) {
		return -c *(t/=d)*(t-2) + b;
	},
	easeInOutQuad: function (x, t, b, c, d) {
		if ((t/=d/2) < 1) return c/2*t*t + b;
		return -c/2 * ((--t)*(t-2) - 1) + b;
	},
	easeInCubic: function (x, t, b, c, d) {
		return c*(t/=d)*t*t + b;
	},
	easeOutCubic: function (x, t, b, c, d) {
		return c*((t=t/d-1)*t*t + 1) + b;
	},
	easeInOutCubic: function (x, t, b, c, d) {
		if ((t/=d/2) < 1) return c/2*t*t*t + b;
		return c/2*((t-=2)*t*t + 2) + b;
	},
	easeInQuart: function (x, t, b, c, d) {
		return c*(t/=d)*t*t*t + b;
	},
	easeOutQuart: function (x, t, b, c, d) {
		return -c * ((t=t/d-1)*t*t*t - 1) + b;
	},
	easeInOutQuart: function (x, t, b, c, d) {
		if ((t/=d/2) < 1) return c/2*t*t*t*t + b;
		return -c/2 * ((t-=2)*t*t*t - 2) + b;
	},
	easeInQuint: function (x, t, b, c, d) {
		return c*(t/=d)*t*t*t*t + b;
	},
	easeOutQuint: function (x, t, b, c, d) {
		return c*((t=t/d-1)*t*t*t*t + 1) + b;
	},
	easeInOutQuint: function (x, t, b, c, d) {
		if ((t/=d/2) < 1) return c/2*t*t*t*t*t + b;
		return c/2*((t-=2)*t*t*t*t + 2) + b;
	},
	easeInSine: function (x, t, b, c, d) {
		return -c * Math.cos(t/d * (Math.PI/2)) + c + b;
	},
	easeOutSine: function (x, t, b, c, d) {
		return c * Math.sin(t/d * (Math.PI/2)) + b;
	},
	easeInOutSine: function (x, t, b, c, d) {
		return -c/2 * (Math.cos(Math.PI*t/d) - 1) + b;
	},
	easeInExpo: function (x, t, b, c, d) {
		return (t==0) ? b : c * Math.pow(2, 10 * (t/d - 1)) + b;
	},
	easeOutExpo: function (x, t, b, c, d) {
		return (t==d) ? b+c : c * (-Math.pow(2, -10 * t/d) + 1) + b;
	},
	easeInOutExpo: function (x, t, b, c, d) {
		if (t==0) return b;
		if (t==d) return b+c;
		if ((t/=d/2) < 1) return c/2 * Math.pow(2, 10 * (t - 1)) + b;
		return c/2 * (-Math.pow(2, -10 * --t) + 2) + b;
	},
	easeInCirc: function (x, t, b, c, d) {
		return -c * (Math.sqrt(1 - (t/=d)*t) - 1) + b;
	},
	easeOutCirc: function (x, t, b, c, d) {
		return c * Math.sqrt(1 - (t=t/d-1)*t) + b;
	},
	easeInOutCirc: function (x, t, b, c, d) {
		if ((t/=d/2) < 1) return -c/2 * (Math.sqrt(1 - t*t) - 1) + b;
		return c/2 * (Math.sqrt(1 - (t-=2)*t) + 1) + b;
	},
	easeInElastic: function (x, t, b, c, d) {
		var s=1.70158;var p=0;var a=c;
		if (t==0) return b;  if ((t/=d)==1) return b+c;  if (!p) p=d*.3;
		if (a < Math.abs(c)) { a=c; var s=p/4; }
		else var s = p/(2*Math.PI) * Math.asin (c/a);
		return -(a*Math.pow(2,10*(t-=1)) * Math.sin( (t*d-s)*(2*Math.PI)/p )) + b;
	},
	easeOutElastic: function (x, t, b, c, d) {
		var s=1.70158;var p=0;var a=c;
		if (t==0) return b;  if ((t/=d)==1) return b+c;  if (!p) p=d*.3;
		if (a < Math.abs(c)) { a=c; var s=p/4; }
		else var s = p/(2*Math.PI) * Math.asin (c/a);
		return a*Math.pow(2,-10*t) * Math.sin( (t*d-s)*(2*Math.PI)/p ) + c + b;
	},
	easeInOutElastic: function (x, t, b, c, d) {
		var s=1.70158;var p=0;var a=c;
		if (t==0) return b;  if ((t/=d/2)==2) return b+c;  if (!p) p=d*(.3*1.5);
		if (a < Math.abs(c)) { a=c; var s=p/4; }
		else var s = p/(2*Math.PI) * Math.asin (c/a);
		if (t < 1) return -.5*(a*Math.pow(2,10*(t-=1)) * Math.sin( (t*d-s)*(2*Math.PI)/p )) + b;
		return a*Math.pow(2,-10*(t-=1)) * Math.sin( (t*d-s)*(2*Math.PI)/p )*.5 + c + b;
	},
	easeInBack: function (x, t, b, c, d, s) {
		if (s == undefined) s = 1.70158;
		return c*(t/=d)*t*((s+1)*t - s) + b;
	},
	easeOutBack: function (x, t, b, c, d, s) {
		if (s == undefined) s = 1.70158;
		return c*((t=t/d-1)*t*((s+1)*t + s) + 1) + b;
	},
	easeInOutBack: function (x, t, b, c, d, s) {
		if (s == undefined) s = 1.70158; 
		if ((t/=d/2) < 1) return c/2*(t*t*(((s*=(1.525))+1)*t - s)) + b;
		return c/2*((t-=2)*t*(((s*=(1.525))+1)*t + s) + 2) + b;
	},
	easeInBounce: function (x, t, b, c, d) {
		return c - jQuery.easing.easeOutBounce (x, d-t, 0, c, d) + b;
	},
	easeOutBounce: function (x, t, b, c, d) {
		if ((t/=d) < (1/2.75)) {
			return c*(7.5625*t*t) + b;
		} else if (t < (2/2.75)) {
			return c*(7.5625*(t-=(1.5/2.75))*t + .75) + b;
		} else if (t < (2.5/2.75)) {
			return c*(7.5625*(t-=(2.25/2.75))*t + .9375) + b;
		} else {
			return c*(7.5625*(t-=(2.625/2.75))*t + .984375) + b;
		}
	},
	easeInOutBounce: function (x, t, b, c, d) {
		if (t < d/2) return jQuery.easing.easeInBounce (x, t*2, 0, c, d) * .5 + b;
		return jQuery.easing.easeOutBounce (x, t*2-d, 0, c, d) * .5 + c*.5 + b;
	}
});

/*
 *
 * TERMS OF USE - EASING EQUATIONS
 * 
 * Open source under the BSD License. 
 * 
 * Copyright © 2001 Robert Penner
 * All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without modification, 
 * are permitted provided that the following conditions are met:
 * 
 * Redistributions of source code must retain the above copyright notice, this list of 
 * conditions and the following disclaimer.
 * Redistributions in binary form must reproduce the above copyright notice, this list 
 * of conditions and the following disclaimer in the documentation and/or other materials 
 * provided with the distribution.
 * 
 * Neither the name of the author nor the names of contributors may be used to endorse 
 * or promote products derived from this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY 
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
 *  COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 *  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
 *  GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED 
 * AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 *  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED 
 * OF THE POSSIBILITY OF SUCH DAMAGE. 
 *
 */
/**
 * @preserve jQuery Autocomplete plugin v1.2.5
 * @homepage http://xdsoft.net/jqplugins/autocomplete/
 * @license MIT - MIT-LICENSE.txt
 * (c) 2014, Chupurnov Valeriy <chupurnov@gmail.com>
 */
(function ($) {
	'use strict';
	var	ARROWLEFT = 37,
		ARROWRIGHT = 39,
		ARROWUP = 38,
		ARROWDOWN = 40,
		TAB = 9,
		CTRLKEY = 17,
		SHIFTKEY = 16,
		DEL = 46,
		ENTER = 13,
		ESC = 27,
		BACKSPACE = 8,
		AKEY = 65,
		CKEY = 67,
		VKEY = 86,
		ZKEY = 90,
		YKEY = 89,
		defaultSetting = {},
		//currentInput = false,
		ctrlDown = false,
		shiftDown = false,
		interval_for_visibility,
		publics = {},
		accent_map = {
			'ẚ':'a','Á':'a','á':'a','À':'a','à':'a','Ă':'a','ă':'a','Ắ':'a','ắ':'a','Ằ':'a','ằ':'a','Ẵ':'a','ẵ':'a','Ẳ':'a',
			'Ẫ':'a','ẫ':'a','Ẩ':'a','ẩ':'a','Ǎ':'a','ǎ':'a','Å':'a','å':'a','Ǻ':'a','ǻ':'a','Ä':'a','ä':'a','Ǟ':'a','ǟ':'a',
			'Ã':'a','ã':'a','Ȧ':'a','ȧ':'a','Ǡ':'a','ǡ':'a','Ą':'a','ą':'a','Ā':'a','ā':'a','Ả':'a','ả':'a','Ȁ':'a','ȁ':'a',
			'Ȃ':'a','ȃ':'a','Ạ':'a','ạ':'a','Ặ':'a','ặ':'a','Ậ':'a','ậ':'a','Ḁ':'a','ḁ':'a','Ⱥ':'a','ⱥ':'a','Ǽ':'a','ǽ':'a',
			'Ǣ':'a','ǣ':'a','Ḃ':'b','ḃ':'b','Ḅ':'b','ḅ':'b','Ḇ':'b','ḇ':'b','Ƀ':'b','ƀ':'b','ᵬ':'b','Ɓ':'b','ɓ':'b','Ƃ':'b',
			'ƃ':'b','Ć':'c','ć':'c','Ĉ':'c','ĉ':'c','Č':'c','č':'c','Ċ':'c','ċ':'c','Ç':'c','ç':'c','Ḉ':'c','ḉ':'c','Ȼ':'c',
			'ȼ':'c','Ƈ':'c','ƈ':'c','ɕ':'c','Ď':'d','ď':'d','Ḋ':'d','ḋ':'d','Ḑ':'d','ḑ':'d','Ḍ':'d','ḍ':'d','Ḓ':'d','ḓ':'d',
			'Ḏ':'d','ḏ':'d','Đ':'d','đ':'d','ᵭ':'d','Ɖ':'d','ɖ':'d','Ɗ':'d','ɗ':'d','Ƌ':'d','ƌ':'d','ȡ':'d','ð':'d','É':'e',
			'Ə':'e','Ǝ':'e','ǝ':'e','é':'e','È':'e','è':'e','Ĕ':'e','ĕ':'e','Ê':'e','ê':'e','Ế':'e','ế':'e','Ề':'e','ề':'e',
			'Ễ':'e','ễ':'e','Ể':'e','ể':'e','Ě':'e','ě':'e','Ë':'e','ë':'e','Ẽ':'e','ẽ':'e','Ė':'e','ė':'e','Ȩ':'e','ȩ':'e',
			'Ḝ':'e','ḝ':'e','Ę':'e','ę':'e','Ē':'e','ē':'e','Ḗ':'e','ḗ':'e','Ḕ':'e','ḕ':'e','Ẻ':'e','ẻ':'e','Ȅ':'e','ȅ':'e',
			'Ȇ':'e','ȇ':'e','Ẹ':'e','ẹ':'e','Ệ':'e','ệ':'e','Ḙ':'e','ḙ':'e','Ḛ':'e','ḛ':'e','Ɇ':'e','ɇ':'e','ɚ':'e','ɝ':'e',
			'Ḟ':'f','ḟ':'f','ᵮ':'f','Ƒ':'f','ƒ':'f','Ǵ':'g','ǵ':'g','Ğ':'g','ğ':'g','Ĝ':'g','ĝ':'g','Ǧ':'g','ǧ':'g','Ġ':'g',
			'ġ':'g','Ģ':'g','ģ':'g','Ḡ':'g','ḡ':'g','Ǥ':'g','ǥ':'g','Ɠ':'g','ɠ':'g','Ĥ':'h','ĥ':'h','Ȟ':'h','ȟ':'h','Ḧ':'h',
			'ḧ':'h','Ḣ':'h','ḣ':'h','Ḩ':'h','ḩ':'h','Ḥ':'h','ḥ':'h','Ḫ':'h','ḫ':'h','H':'h','̱':'h','ẖ':'h','Ħ':'h','ħ':'h',
			'Ⱨ':'h','ⱨ':'h','Í':'i','í':'i','Ì':'i','ì':'i','Ĭ':'i','ĭ':'i','Î':'i','î':'i','Ǐ':'i','ǐ':'i','Ï':'i','ï':'i',
			'Ḯ':'i','ḯ':'i','Ĩ':'i','ĩ':'i','İ':'i','i':'i','Į':'i','į':'i','Ī':'i','ī':'i','Ỉ':'i','ỉ':'i','Ȉ':'i','ȉ':'i',
			'Ȋ':'i','ȋ':'i','Ị':'i','ị':'i','Ḭ':'i','ḭ':'i','I':'i','ı':'i','Ɨ':'i','ɨ':'i','Ĵ':'j','ĵ':'j','J':'j','̌':'j',
			'ǰ':'j','ȷ':'j','Ɉ':'j','ɉ':'j','ʝ':'j','ɟ':'j','ʄ':'j','Ḱ':'k','ḱ':'k','Ǩ':'k','ǩ':'k','Ķ':'k','ķ':'k','Ḳ':'k',
			'ḳ':'k','Ḵ':'k','ḵ':'k','Ƙ':'k','ƙ':'k','Ⱪ':'k','ⱪ':'k','Ĺ':'a','ĺ':'l','Ľ':'l','ľ':'l','Ļ':'l','ļ':'l','Ḷ':'l',
			'ḷ':'l','Ḹ':'l','ḹ':'l','Ḽ':'l','ḽ':'l','Ḻ':'l','ḻ':'l','Ł':'l','ł':'l','̣':'l','Ŀ':'l',
			'ŀ':'l','Ƚ':'l','ƚ':'l','Ⱡ':'l','ⱡ':'l','Ɫ':'l','ɫ':'l','ɬ':'l','ɭ':'l','ȴ':'l','Ḿ':'m','ḿ':'m','Ṁ':'m','ṁ':'m',
			'Ṃ':'m','ṃ':'m','ɱ':'m','Ń':'n','ń':'n','Ǹ':'n','ǹ':'n','Ň':'n','ň':'n','Ñ':'n','ñ':'n','Ṅ':'n','ṅ':'n','Ņ':'n',
			'ņ':'n','Ṇ':'n','ṇ':'n','Ṋ':'n','ṋ':'n','Ṉ':'n','ṉ':'n','Ɲ':'n','ɲ':'n','Ƞ':'n','ƞ':'n','ɳ':'n','ȵ':'n','N':'n',
			'̈':'n','n':'n','Ó':'o','ó':'o','Ò':'o','ò':'o','Ŏ':'o','ŏ':'o','Ô':'o','ô':'o','Ố':'o','ố':'o','Ồ':'o',
			'ồ':'o','Ỗ':'o','ỗ':'o','Ổ':'o','ổ':'o','Ǒ':'o','ǒ':'o','Ö':'o','ö':'o','Ȫ':'o','ȫ':'o','Ő':'o','ő':'o','Õ':'o',
			'õ':'o','Ṍ':'o','ṍ':'o','Ṏ':'o','ṏ':'o','Ȭ':'o','ȭ':'o','Ȯ':'o','ȯ':'o','Ȱ':'o','ȱ':'o','Ø':'o','ø':'o','Ǿ':'o',
			'ǿ':'o','Ǫ':'o','ǫ':'o','Ǭ':'o','ǭ':'o','Ō':'o','ō':'o','Ṓ':'o','ṓ':'o','Ṑ':'o','ṑ':'o','Ỏ':'o','ỏ':'o','Ȍ':'o',
			'ȍ':'o','Ȏ':'o','ȏ':'o','Ơ':'o','ơ':'o','Ớ':'o','ớ':'o','Ờ':'o','ờ':'o','Ỡ':'o','ỡ':'o','Ở':'o','ở':'o','Ợ':'o',
			'ợ':'o','Ọ':'o','ọ':'o','Ộ':'o','ộ':'o','Ɵ':'o','ɵ':'o','Ṕ':'p','ṕ':'p','Ṗ':'p','ṗ':'p','Ᵽ':'p','Ƥ':'p','ƥ':'p',
			'P':'p','̃':'p','p':'p','ʠ':'q','Ɋ':'q','ɋ':'q','Ŕ':'r','ŕ':'r','Ř':'r','ř':'r','Ṙ':'r','ṙ':'r','Ŗ':'r',
			'ŗ':'r','Ȑ':'r','ȑ':'r','Ȓ':'r','ȓ':'r','Ṛ':'r','ṛ':'r','Ṝ':'r','ṝ':'r','Ṟ':'r','ṟ':'r','Ɍ':'r','ɍ':'r','ᵲ':'r',
			'ɼ':'r','Ɽ':'r','ɽ':'r','ɾ':'r','ᵳ':'r','ß':'s','Ś':'s','ś':'s','Ṥ':'s','ṥ':'s','Ŝ':'s','ŝ':'s','Š':'s','š':'s',
			'Ṧ':'s','ṧ':'s','Ṡ':'s','ṡ':'s','ẛ':'s','Ş':'s','ş':'s','Ṣ':'s','ṣ':'s','Ṩ':'s','ṩ':'s','Ș':'s','ș':'s','ʂ':'s',
			'S':'s','̩':'s','s':'s','Þ':'t','þ':'t','Ť':'t','ť':'t','T':'t','ẗ':'t','Ṫ':'t','ṫ':'t','Ţ':'t','ţ':'t','Ṭ':'t',
			'ṭ':'t','Ț':'t','ț':'t','Ṱ':'t','ṱ':'t','Ṯ':'t','ṯ':'t','Ŧ':'t','ŧ':'t','Ⱦ':'t','ⱦ':'t','ᵵ':'t',
			'ƫ':'t','Ƭ':'t','ƭ':'t','Ʈ':'t','ʈ':'t','ȶ':'t','Ú':'u','ú':'u','Ù':'u','ù':'u','Ŭ':'u','ŭ':'u','Û':'u','û':'u',
			'Ǔ':'u','ǔ':'u','Ů':'u','ů':'u','Ü':'u','ü':'u','Ǘ':'u','ǘ':'u','Ǜ':'u','ǜ':'u','Ǚ':'u','ǚ':'u','Ǖ':'u','ǖ':'u',
			'Ű':'u','ű':'u','Ũ':'u','ũ':'u','Ṹ':'u','ṹ':'u','Ų':'u','ų':'u','Ū':'u','ū':'u','Ṻ':'u','ṻ':'u','Ủ':'u','ủ':'u',
			'Ȕ':'u','ȕ':'u','Ȗ':'u','ȗ':'u','Ư':'u','ư':'u','Ứ':'u','ứ':'u','Ừ':'u','ừ':'u','Ữ':'u','ữ':'u','Ử':'u','ử':'u',
			'Ự':'u','ự':'u','Ụ':'u','ụ':'u','Ṳ':'u','ṳ':'u','Ṷ':'u','ṷ':'u','Ṵ':'u','ṵ':'u','Ʉ':'u','ʉ':'u','Ṽ':'v','ṽ':'v',
			'Ṿ':'v','ṿ':'v','Ʋ':'v','ʋ':'v','Ẃ':'w','ẃ':'w','Ẁ':'w','ẁ':'w','Ŵ':'w','ŵ':'w','W':'w','̊':'w','ẘ':'w','Ẅ':'w',
			'ẅ':'w','Ẇ':'w','ẇ':'w','Ẉ':'w','ẉ':'w','Ẍ':'x','ẍ':'x','Ẋ':'x','ẋ':'x','Ý':'y','ý':'y','Ỳ':'y','ỳ':'y','Ŷ':'y',
			'ŷ':'y','Y':'y','ẙ':'y','Ÿ':'y','ÿ':'y','Ỹ':'y','ỹ':'y','Ẏ':'y','ẏ':'y','Ȳ':'y','ȳ':'y','Ỷ':'y','ỷ':'y',
			'Ỵ':'y','ỵ':'y','ʏ':'y','Ɏ':'y','ɏ':'y','Ƴ':'y','ƴ':'y','Ź':'z','ź':'z','Ẑ':'z','ẑ':'z','Ž':'z','ž':'z','Ż':'z',
			'ż':'z','Ẓ':'z','ẓ':'z','Ẕ':'z','ẕ':'z','Ƶ':'z','ƶ':'z','Ȥ':'z','ȥ':'z','ʐ':'z','ʑ':'z','Ⱬ':'z','ⱬ':'z','Ǯ':'z',
			'ǯ':'z','ƺ':'z','２':'2','６':'6','Ｂ':'B','Ｆ':'F','Ｊ':'J','Ｎ':'N','Ｒ':'R','Ｖ':'V','Ｚ':'Z','ｂ':'b','ｆ':'f','ｊ':'j',
			'ｎ':'n','ｒ':'r','ｖ':'v','ｚ':'z','１':'1','５':'5','９':'9','Ａ':'A','Ｅ':'E','Ｉ':'I','Ｍ':'M','Ｑ':'Q','Ｕ':'U','Ｙ':'Y',
			'ａ':'a','ｅ':'e','ｉ':'i','ｍ':'m','ｑ':'q','ｕ':'u','ｙ':'y','０':'0','４':'4','８':'8','Ｄ':'D','Ｈ':'H','Ｌ':'L','Ｐ':'P',
			'Ｔ':'T','Ｘ':'X','ｄ':'d','ｈ':'h','ｌ':'l','ｐ':'p','ｔ':'t','ｘ':'x','３':'3','７':'7','Ｃ':'C','Ｇ':'G','Ｋ':'K','Ｏ':'O',
			'Ｓ':'S','Ｗ':'W','ｃ':'c','ｇ':'g','ｋ':'k','ｏ':'o','ｓ':'s','ｗ':'w','ẳ':'a','Â':'a','â':'a','Ấ':'a','ấ':'a','Ầ':'a','ầ':'a'
		};

	if (window.getComputedStyle === undefined) {
		window.getComputedStyle = (function () {
			function getPixelSize(element, style, property, fontSize) {
				var	sizeWithSuffix = style[property],
					size = parseFloat(sizeWithSuffix),
					suffix = sizeWithSuffix.split(/\d/)[0],
					rootSize;

				fontSize = fontSize !== null ? fontSize : /%|em/.test(suffix) && element.parentElement ? getPixelSize(element.parentElement, element.parentElement.currentStyle, 'fontSize', null) : 16;
				rootSize = property === 'fontSize' ? fontSize : /width/i.test(property) ? element.clientWidth : element.clientHeight;

				return (suffix === 'em') ? size * fontSize : (suffix === 'in') ? size * 96 : (suffix === 'pt') ? size * 96 / 72 : (suffix === '%') ? size / 100 * rootSize : size;
			}

			function setShortStyleProperty(style, property) {
				var	borderSuffix = property === 'border' ? 'Width' : '',
					t = property + 'Top' + borderSuffix,
					r = property + 'Right' + borderSuffix,
					b = property + 'Bottom' + borderSuffix,
					l = property + 'Left' + borderSuffix;

				style[property] = (style[t] === style[r] === style[b] === style[l] ? [style[t]]
					: style[t] === style[b] && style[l] === style[r] ? [style[t], style[r]]
						: style[l] === style[r] ? [style[t], style[r], style[b]]
							: [style[t], style[r], style[b], style[l]]).join(' ');
			}

			function CSSStyleDeclaration(element) {
				var	currentStyle = element.currentStyle,
					style = this,
					property,
					fontSize = getPixelSize(element, currentStyle, 'fontSize', null);
				
				for (property in currentStyle) {
					if (Object.prototype.hasOwnProperty.call(currentStyle, property)) {
						if (/width|height|margin.|padding.|border.+W/.test(property) && style[property] !== 'auto') {
							style[property] = getPixelSize(element, currentStyle, property, fontSize) + 'px';
						} else if (property === 'styleFloat') {
							style.float = currentStyle[property];
						} else {
							style[property] = currentStyle[property];
						}
					}
				}

				setShortStyleProperty(style, 'margin');
				setShortStyleProperty(style, 'padding');
				setShortStyleProperty(style, 'border');

				style.fontSize = fontSize + 'px';

				return style;
			}

			CSSStyleDeclaration.prototype = {
				constructor: CSSStyleDeclaration,
				getPropertyPriority: function () {},
				getPropertyValue: function (prop) {
					return this[prop] || '';
				},
				item: function () {},
				removeProperty: function () {},
				setProperty: function () {},
				getPropertyCSSValue: function () {}
			};

			function getComputedStyle(element) {
				return new CSSStyleDeclaration(element);
			}

			return getComputedStyle;
		}(this));
	}


	$(document)
		.on('keydown.xdsoftctrl', function (e) {
			if (e.keyCode === CTRLKEY) {
				ctrlDown = true;
			}
			if (e.keyCode === SHIFTKEY) {
				ctrlDown = true;
			}
		})
		.on('keyup.xdsoftctrl', function (e) {
			if (e.keyCode === CTRLKEY) {
				ctrlDown = false;
			}
			if (e.keyCode === SHIFTKEY) {
				ctrlDown = false;
			}
		});
	
	function accentReplace (s) {
		if (!s) { return ''; }
		var ret = '',i;
		for (i=0; i < s.length; i+=1) {
			ret += accent_map[s.charAt(i)] || s.charAt(i);
		}
		return ret;
	}
	
	function escapeRegExp (str) {
		return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&");
	}
	
	function getCaretPosition(input) {
		if (!input) {
			return;
		}
		if (input.selectionStart) {
			return input.selectionStart;
		}
		if (document.selection) {
			input.focus();
			var sel = document.selection.createRange(),
				selLen = document.selection.createRange().text.length;
			sel.moveStart('character', -input.value.length);
			return sel.text.length - selLen;
		}
	}

	function setCaretPosition(input, pos) {
		if (input.setSelectionRange) {
			input.focus();
			input.setSelectionRange(pos, pos);
		} else if (input.createTextRange) {
			var range = input.createTextRange();
			range.collapse(true);
			range.moveEnd('character', pos);
			range.moveStart('character', pos);
			range.select();
		}
	}

	function isset(value) {
		return value !== undefined;
	}

	function safe_call(callback, args, callback2, defaultValue) {
		if (isset(callback) && !$.isArray(callback)) {
			return $.isFunction(callback) ? callback.apply(this,args):defaultValue;
		}
		if(isset(callback2)) {
			return safe_call.call(this,callback2,args);
		}
		return defaultValue;
	};

	function __safe( callbackName,source,args,defaultValue ){
		var undefinedVar;
		return safe_call.call( this, (isset(this.source[source])&&
			Object.prototype.hasOwnProperty.call(this.source[source], callbackName)) ? this.source[source][callbackName] : undefinedVar, args, function(){
			return safe_call.call(this,
					isset(this[callbackName][source])?
						this[callbackName][source]:(
							isset(this[callbackName][0])?
								this[callbackName][0]:(
									Object.prototype.hasOwnProperty.call(this, callbackName)?
										this[callbackName]:
										undefinedVar
								)
						),
					args,
					defaultSetting[callbackName][source]||defaultSetting[callbackName][0]||defaultSetting[callbackName],
					defaultValue
			);
		},defaultValue);
	};

	function __get( property,source ){
		if(!isset(source))
			source = 0;
		
		if( $.isArray(this.source) && isset(this.source[source]) && isset(this.source[source][property]))
			return this.source[source][property];
			
		if( isset(this[property]) ){
			if( $.isArray(this[property]) ){
				if( isset(this[property][source]) )
					return this[property][source];
				if( isset(this[property][0]) )
					return this[property][0];
				return null;
			}
			return this[property];
		}
		
		return null;
	};

	function loadRemote( url,sourceObject,done,debug ){
		$.ajax($.extend(true,{
			url : url,
			type  : 'GET' ,
			async:true,
			cache :false,
			dataType : 'json'
		 },sourceObject.ajax))
		 
		 .done(function( data ){
			done&&done.apply(this,$.makeArray(arguments));
		 })
		 
		 .fail(function( jqXHR, textStatus ){
			if( debug )
				console.log("Request failed: " + textStatus);
		 });
	}


	function findRight( data,query ){
		var right = false,source;
		
		for (source = 0;source < data.length;source += 1) {
			if( right = __safe.call(this,"findRight",source,[data[source],query,source]) ){
				return {right:right,source:source};
			}
		}
		
		return false;
	}

	function processData( data,query ){
		var source;
		preparseData
			.call( this,data,query );
		
		for (source = 0;source < data.length;source += 1) {
			data[source] = __safe.call(this,
				'filter',
				source,
				[data[source], query, source],
				data[source]
			);
		}
	};


	function collectData( query,datasource,callback ){
		var options = this,source;
		
		if( $.isFunction(options.source) ){
				options.source.apply(options,[query,function(items){
					datasource = [items];
					safe_call.call(options,callback,[query]);
				},datasource,0]);
		}else{
			for (source = 0;source < options.source.length;source += 1) {
				if ($.isArray(options.source[source])) {
					datasource[source] = options.source[source];
				} else if ($.isFunction(options.source[source])) {
					(function (source) {
						options.source[source].apply(options,[query, function(items){
							if (!datasource[source]) {
								datasource[source] = [];
							}
								
							if (items && $.isArray(items)) {
								switch (options.appendMethod) {
									case 'replace':
										datasource[source] = items;
									break;
									default:
										datasource[source] = datasource[source].concat(items);
								}
							}
								
							safe_call.call(options,callback,[query]);
						}, datasource,source]);
					}(source));
				} else {
					switch (options.source[source].type) {
						case 'remote':
							if (isset(options.source[source].url)) {
								if (!isset(options.source[source].minLength) || query.length >= options.source[source].minLength){
									var url = __safe.call(options,'replace',source,[options.source[source].url,query],'');
									if (!datasource[source]) {
										datasource[source] = [];
									}
									(function (source) {
										loadRemote(url,options.source[source], function(resp){
											datasource[source] = resp;
											safe_call.call(options,callback,[query]);
										},options.debug);
									}(source));
								}
							}
						break;
						default:
							if( isset(options.source[source]['data']) ){
								datasource[source] = options.source[source]['data'];
							}else{
								datasource[source] = options.source[source];
							}
					}
				}
			}
		}
		safe_call.call(options,callback,[query]);
	};

	function preparseData( data,query ){
		for( var source=0;source<data.length;source++ ){
			data[source] = __safe.call(this,
				'preparse',
				source,
				[data[source],query],
				data[source]
			);
		}
	};

	function renderData( data,query ){
		var  source, i, $div, $divs = [];
		for (source = 0;source < data.length;source += 1) {
			for (i = 0;i < data[source].length;i += 1) {
				if( $divs.length>=this.limit )
					break;
					
				$div = $(__safe.call(this,
					'render',source,
					[data[source][i],source,i,query],
					''
				));
				
				$div.data('source',source);
				$div.data('pid',i);
				$div.data('item',data[source][i]);
				
				$divs.push($div);
			}
		}
		return $divs;
	};

	function getItem( $div,dataset ){
		if( isset($div.data('source')) && 
			isset($div.data('pid')) && 
			isset(dataset[$div.data('source')]) && 
			isset(dataset[$div.data('source')][$div.data('pid')]) 
		){
			return dataset[$div.data('source')][$div.data('pid')]
		}
		return false;
	};

	function getValue( $div,dataset ){
		var item = getItem($div,dataset);
		
		if( item ){
			return __safe.call(this,
				'getValue',$div.data('source'),
				[item,$div.data('source')]
			);
		}else{
			if( isset($div.data('value')) ){
				return decodeURIComponent($div.data('value'));
			}else{
				return $div.html();
			}
		}
	};

	defaultSetting = {
		minLength: 0,
		valueKey: 'value',
		titleKey: 'title',
		highlight: true,

		showHint: true,

		dropdownWidth: '100%',
		dropdownStyle: {},
		itemStyle: {},
		hintStyle: false,
		style: false,

		debug: true,
		openOnFocus: false,
		closeOnBlur: true,

		autoselect: false,
		
		accents: true,
		replaceAccentsForRemote: true,
		
		limit: 20,
		visibleLimit: 20,
		visibleHeight: 0,
		defaultHeightItem: 30,

		timeoutUpdate: 10,

		get: function (property, source) {
			return __get.call(this,property,source);
		},
		
		replace: [
			function (url, query) {
				if (this.replaceAccentsForRemote) {
					query = accentReplace(query);
				}
				return url.replace('%QUERY%',encodeURIComponent(query));
			}
		],
		
		equal:function( value,query ){
			return query.toLowerCase()==value.substr(0,query.length).toLowerCase();
		},
		
		findRight:[
			function(items,query,source){
				var results = [],value = '',i;
				if (items) {
					for (i = 0;i < items.length;i += 1) {
						value = __safe.call(this,'getValue',source,[items[i],source]);
						if (__safe.call(this, 'equal', source, [value,query,source], false)) {
							return items[i];
						}
					}				
				}
				return false;
			}
		],
		
		valid:[
			function (value, query) {
				if (this.accents) {
					value = accentReplace(value);
					query = accentReplace(query);
				}
				return value.toLowerCase().indexOf(query.toLowerCase())!=-1;
				
			}
		],
		
		filter:[
			function (items, query, source) {
				var results = [], value = '',i;
				if (items) {					
					for (i = 0;i < items.length;i += 1) {
						value = isset(items[i][this.get('valueKey', source)]) ? items[i][this.get('valueKey', source)] : items[i].toString();
						if (__safe.call(this, 'valid', source, [value, query])) {
							results.push(items[i]); 
						}
					}
				}
				return results;
			}
		],
		
		preparse:function(items){
			return items;
		},
		
		getValue: [
			function (item, source) {
				return isset(item[this.get('valueKey',source)])?item[this.get('valueKey',source)]:item.toString();
			}
		],
		
		getTitle: [
			function (item, source) {
				return isset(item[this.get('titleKey',source)])?item[this.get('titleKey',source)]:item.toString();
			}
		],
		
		render: [
			function (item, source, pid, query) {
				var value = isset(item[this.get('valueKey', source)]) ? item[this.get('valueKey', source)] : item.toString(),
					title = (isset(item[this.get('titleKey', source)]) ? item[this.get('titleKey', source)] : value) + '',
					_value = '',
					_query = '',
					_title = '',
					hilite_hints = '',
					highlighted = '',
					c, h, i,
					spos = 0;
					
				if (this.highlight) {
					if (!this.accents) {
						title = title.replace(new RegExp('('+escapeRegExp(query)+')','i'),'<b>$1</b>');
					}else{
						_title = accentReplace(title).toLowerCase().replace(/[<>]+/g, ''),
						_query = accentReplace(query).toLowerCase().replace(/[<>]+/g, '');
						
						hilite_hints = _title.replace(new RegExp(escapeRegExp(_query), 'g'), '<'+_query+'>');
						for (i=0;i < hilite_hints.length;i += 1) {
							c = title.charAt(spos);
							h = hilite_hints.charAt(i);
							if (h === '<') {
								highlighted += '<b>';
							} else if (h === '>') {
								highlighted += '</b>';
							} else {
								spos += 1;
								highlighted += c;
							}
						}
						title = highlighted;
					}
				}
					
				return '<div '+(value==query?'class="active"':'')+' data-value="'+encodeURIComponent(value)+'">'
							+title+
						'</div>';
			}
		],
		appendMethod: 'concat', // supported merge and replace 
		source:[]
	};
	function init( that,options ){
		if( $(that).hasClass('xdsoft_input') )
				return;
		
		var $box = $('<div class="xdsoft_autocomplete"></div>'),
			$dropdown = $('<div class="xdsoft_autocomplete_dropdown"></div>'),
			$hint = $('<input readonly class="xdsoft_autocomplete_hint"/>'),
			$input = $(that),
			timer1 = 0,
			dataset = [],
			iOpen	= false,
			value = '',
			currentValue = '',
			currentSelect = '',
			active = null,
			pos = 0;
		
		//it can be used to access settings
		$input.data('autocomplete_options', options);
		
		$dropdown
			.on('mousedown', function(e) {
				e.preventDefault();
				e.stopPropagation();
			})
			.on('updatescroll.xdsoft', function() {
				var _act = $dropdown.find('.active');
				if (!_act.length) {
					return;
				}
				
				var top = _act.position().top,
					actHght = _act.outerHeight(true),
					scrlTop = $dropdown.scrollTop(),
					hght = $dropdown.height();
					
				if (top <0) {
					$dropdown.scrollTop(scrlTop-Math.abs(top));
				} else if (top+actHght>hght) {
					$dropdown.scrollTop(scrlTop+top+actHght-hght);
				}
			});
		
		$box
			.css({
				'display':$input.css('display'),
				'width':$input.css('width')
			});
		
		if( options.style )
			$box.css(options.style);
			
		$input
			.addClass('xdsoft_input')
			.attr('autocomplete','off');
		
		$dropdown
			.on('mousemove','div',function(){
				if( $(this).hasClass('active') )
					return true;
				$dropdown.find('div').removeClass('active');
				$(this).addClass('active');
			})
			.on('mousedown','div',function(){
				$dropdown.find('div').removeClass('active');
				$(this).addClass('active');
				$input.trigger('pick.xdsoft');
			})

		function manageData(){
			if ($input.val()!=currentValue){
				currentValue = $input.val();
			} else {
				return;
			}
			if (currentValue.length < options.minLength) {
				$input.trigger('close.xdsoft');
				return;
			}
			collectData.call(options,currentValue,dataset,function( query ){
				if (query != currentValue) {
					return;
				}
				var right;	
				processData.call(options, dataset,query);

				$input.trigger('updateContent.xdsoft');

				if (options.showHint && currentValue.length && currentValue.length<=$input.prop('size') && (right = findRight.call(options,dataset,currentValue))) {
					var title 	=  __safe.call(options,'getTitle',right.source,[right.right,right.source]);
					title = query + title.substr(query.length);
					$hint.val(title);
				} else {
					$hint.val('');
				}
			});

			return;
		}

		function manageKey (event) {
			var key = event.keyCode, right;
			
			switch( key ){
				case AKEY: case CKEY: case VKEY: case ZKEY: case YKEY:
					if (event.shiftKey || event.ctrlKey) {
						return true;
					}
				break;
				case SHIFTKEY:	
				case CTRLKEY:
					return true;
				break;
				case ARROWRIGHT:	
				case ARROWLEFT:
					if (ctrlDown || shiftDown || event.shiftKey || event.ctrlKey) {
						return true;
					}
					value = $input.val();
					pos = getCaretPosition($input[0]);
					if (key === ARROWRIGHT && pos === value.length) {
						if (right = findRight.call(options, dataset, value)){
							$input.trigger('pick.xdsoft', [
								__safe.call(options,
									'getValue', right.source,
									[right.right, right.source]
								)
							]);
						} else {
							$input.trigger('pick.xdsoft');
						}
						event.preventDefault();
						return false;
					}
					return true;
				case TAB:
				return true;
				case ENTER:
					if (iOpen) {
						$input.trigger('pick.xdsoft');
						event.preventDefault();
						return false;
					} else {
						return true;
					}
				break;
				case ESC:
					// $input
						// .val(currentValue);
					// 	.trigger('close.xdsoft');
					event.preventDefault();
					return true;
				case ARROWDOWN:
				case ARROWUP:
					if (!iOpen) {
						$input.trigger('open.xdsoft');
						$input.trigger('updateContent.xdsoft');
						event.preventDefault();
						return false;
					}
					
					active = $dropdown.find('div.active');
					
					var next = key==ARROWDOWN?'next':'prev', timepick = true;
					
					if( active.length ){
						active.removeClass('active');
						if( active[next]().length ){
							active[next]().addClass('active');
						}else{
							$input.val(currentValue);
							timepick = false;
						}
					}else{
						$dropdown.children().eq(key==ARROWDOWN?0:-1).addClass('active');
					}
					
					if( timepick ){
						$input.trigger('timepick.xdsoft');
					}
					
					$dropdown
						.trigger('updatescroll.xdsoft');
					
					event.preventDefault();
					return false;	
			}
			return;
		}
		
		$input
			.data('xdsoft_autocomplete',dataset)
			.after($box)
			.on('pick.xdsoft', function( event,_value ){

				$input
					.trigger('timepick.xdsoft',_value)
				
				currentSelect = currentValue = $input.val();
				
				$input
					.trigger('close.xdsoft');
				
				//currentInput = false;
				
				active = $dropdown.find('div.active').eq(0);
							
				if( !active.length )
					active = $dropdown.children().first();
					
				$input.trigger('selected.xdsoft',[getItem(active,dataset)]);
			})
			.on('timepick.xdsoft', function( event,_value ){
				active = $dropdown.find('div.active');
							
				if( !active.length )
					active = $dropdown.children().first();
				
				if( active.length ){
					if( !isset(_value) ){
						$input.val(getValue.call(options,active,dataset));
					}else{
						$input.val(_value);
					}
					$input.trigger('autocompleted.xdsoft',[getItem(active,dataset)]);
					$hint.val('');
					setCaretPosition($input[0],$input.val().length);
				}
			})
			.on('keydown.xdsoft input.xdsoft cut.xdsoft paste.xdsoft', function( event ){
				var ret = manageKey(event);
				
				if (ret === false || ret === true) {
					return ret;
				}
				
				setTimeout(function(){
					manageData();
				},1);
				
				manageData();
			})
			.on('change.xdsoft', function( event ){
				currentValue = $input.val();
			});
		
		currentValue = $input.val();
		
		collectData.call(options, $input.val(),dataset,function( query ){
			processData.call(options,dataset,query);
		});
		
		if( options.openOnFocus ){
			$input.on('focusin.xdsoft',function(){
				$input.trigger('open.xdsoft');
				$input.trigger('updateContent.xdsoft');
			});
		}
		
		if( options.closeOnBlur )
			$input.on('focusout.xdsoft',function(){
				$input.trigger('close.xdsoft');
			});
			
		$box
			.append($input)
			.append($dropdown);


		var olderBackground = false,
			timerUpdate = 0;
		
		$input
			.on('updateHelperPosition.xdsoft',function(){
				clearTimeout(timerUpdate);
				timerUpdate = setTimeout(function(){
					$box.css({
						'display':$input.css('display'),
						'width':$input.css('width')
					});
					$dropdown.css($.extend(true,{
						left:$input.position().left,
						top:$input.position().top + parseInt($input.css('marginTop'))+parseInt($input[0].offsetHeight),
						marginLeft:$input.css('marginLeft'),
						marginRight:$input.css('marginRight'),
						width:options.dropdownWidth=='100%'?$input[0].offsetWidth:options.dropdownWidth
					},options.dropdownStyle));
					
					if (options.showHint) {
						var style = getComputedStyle($input[0], "");
						
						$hint[0].style.cssText = style.cssText;
						
						$hint.css({
							'box-sizing':style.boxSizing,
							borderStyle:'solid',
							borderCollapse:style.borderCollapse,
							borderLeftWidth:style.borderLeftWidth,
							borderRightWidth:style.borderRightWidth,
							borderTopWidth:style.borderTopWidth,
							borderBottomWidth:style.borderBottomWidth,
							paddingBottom:style.paddingBottom,
							marginBottom:style.marginBottom,
							paddingTop:style.paddingTop,
							marginTop:style.marginTop,
							paddingLeft:style.paddingLeft,
							marginLeft:style.marginLeft,
							paddingRight:style.paddingRight,
							marginRight:style.marginRight,
							maxHeight:style.maxHeight,
							minHeight:style.minHeight,
							maxWidth:style.maxWidth,
							minWidth:style.minWidth,
							width:style.width,
							letterSpacing:style.letterSpacing,
							lineHeight:style.lineHeight,
							outlineWidth:style.outlineWidth,
							fontFamily:style.fontFamily,
							fontVariant:style.fontVariant,
							fontStyle:$input.css('fontStyle'),
							fontSize:$input.css('fontSize'),
							fontWeight:$input.css('fontWeight'),
							flex:style.flex,
							justifyContent:style.justifyContent,
							borderRadius:style.borderRadius,
							'-webkit-box-shadow':'none',
							'box-shadow':'none'
						});
						
						$input.css('font-size',$input.css('fontSize'))// fix bug with em font size
						
						$hint.innerHeight($input.innerHeight());
						
						$hint.css($.extend(true,{
							position:'absolute',
							zIndex:'1',
							borderColor:'transparent',
							outlineColor:'transparent',
							left:$input.position().left,
							top:$input.position().top,
							background:$input.css('background')
						},options.hintStyle));
						
						
						if( olderBackground!==false ){
							$hint.css('background',olderBackground);
						}else{
							olderBackground = $input.css('background');
						}
						
						try{
							$input[0].style.setProperty('background', 'transparent', 'important');
						} catch(e) {
							$input.css('background','transparent')
						}

						$box
							.append($hint);
					}
				}, options.timeoutUpdate||1);
			});
		
		if ($input.is(':visible')) {
			$input
				.trigger('updateHelperPosition.xdsoft');
		} else {
			interval_for_visibility = setInterval(function () {
				if ($input.is(':visible')) {
					$input
						.trigger('updateHelperPosition.xdsoft');
					clearInterval(interval_for_visibility);
				}
			},100);
		}
		
		$(window).on('resize',function () {
			$box.css({
				'width':'auto'
			});
			$input
				.trigger('updateHelperPosition.xdsoft');
		})
		
		$input	
			.on('close.xdsoft',function(){
				if (!iOpen) {
					return;
				}

				$dropdown
					.hide();

				$hint
					.val('');	

				if (!options.autoselect) {
					$input.val(currentValue);
				}

				iOpen = false;

				//currentInput = false;
			})
			
			.on('updateContent.xdsoft',function(){
				var out = renderData.call(options,dataset,$input.val()),
					hght = 10;
				

				if (out.length) {
					$input.trigger('open.xdsoft');
				} else {
					$input.trigger('close.xdsoft');
					return;
				}

				$(out).each(function(){
					this.css($.extend(true,{
						paddingLeft:$input.css('paddingLeft'),
						paddingRight:$input.css('paddingRight')
					},options.itemStyle));
				});

				$dropdown
					.html(out);
					
				if (options.visibleHeight){
					hght = options.visibleHeight;
				} else {
					hght = options.visibleLimit * ((out[0] ? out[0].outerHeight(true) : 0) || options.defaultHeightItem) + 5;
				}
				
				$dropdown
					.css('maxHeight', hght+'px')
			})
			
			.on('open.xdsoft',function(){
				if( iOpen )
					return;
				
				$dropdown
					.show();

				iOpen = true;
					
				//currentInput = $input;
			})
			.on('destroy.xdsoft',function(){
				$input.removeClass('xdsoft');
				$box.after($input);
				$box.remove();
				clearTimeout(timer1);
				//currentInput = false;
				$input.data('xdsoft_autocomplete',null);
				$input
					.off('.xdsoft')
			});
	};
	
	publics = {
		destroy: function () {
			return this.trigger('destroy.xdsoft');
		},
		update: function () {
			return this.trigger('updateHelperPosition.xdsoft');	
		},
		options: function (_options) {
			if (this.data('autocomplete_options') && $.isPlainObject(_options)) {
				this.data('autocomplete_options', $.extend(true, this.data('autocomplete_options'), _options));
			}
			return this;
		},
		setSource: function (_newsource, id) {
			if(this.data('autocomplete_options') && ($.isPlainObject(_newsource) || $.isFunction(_newsource) || $.isArray(_newsource))) {
				var options = this.data('autocomplete_options'), 
					dataset = this.data('xdsoft_autocomplete'),
					source 	= options.source;
				if (id!==undefined && !isNaN(id)) {
					if ($.isPlainObject(_newsource) || $.isArray(_newsource)) {
						source[id] =  $.extend(true,$.isArray(_newsource) ? [] : {}, _newsource);
					} else {
						source[id] =  _newsource;
					}
				} else {
					if ($.isFunction(_newsource)) {
						this.data('autocomplete_options').source = _newsource;
					} else {
						$.extend(true, source, _newsource);
					}
				}
				
				collectData.call(options, this.val(), dataset,function( query ){
					processData.call(options,dataset,query);
				});
			}
			return this;
		},
		getSource: function (id) {
			if (this.data('autocomplete_options')) {
				var source = this.data('autocomplete_options').source;
				if (id!==undefined && !isNaN(id) &&source[id]) {
					return source[id];
				} else {
					return source;
				}
			}
			return null;
		} 
	};
	
	$.fn.autocomplete = function(_options, _second, _third){
		if ($.type(_options) === 'string' && publics[_options]) {
			return publics[_options].call(this, _second, _third);
		}
		return this.each(function () {
			var options = $.extend(true, {}, defaultSetting, _options);
			init(this, options);
		});
	};
}(jQuery));

// tipsy, facebook style tooltips for jquery
// version 1.0.0a
// (c) 2008-2010 jason frame [jason@onehackoranother.com]
// released under the MIT license

(function($) {
    
    function maybeCall(thing, ctx) {
        return (typeof thing == 'function') ? (thing.call(ctx)) : thing;
    };
    
    function isElementInDOM(ele) {
      while (ele = ele.parentNode) {
        if (ele == document) return true;
      }
      return false;
    };
    
    function Tipsy(element, options) {
        this.$element = $(element);
        this.options = options;
        this.enabled = true;
        this.fixTitle();
    };
    
    Tipsy.prototype = {
        show: function() {
            var title = this.getTitle();
            if (title && this.enabled) {
                var $tip = this.tip();
                
                $tip.find('.tipsy-inner')[this.options.html ? 'html' : 'text'](title);
                $tip[0].className = 'tipsy'; // reset classname in case of dynamic gravity
                $tip.remove().css({top: 0, left: 0, visibility: 'hidden', display: 'block'}).prependTo(document.body);
                
                var pos = $.extend({}, this.$element.offset(), {
                    width: this.$element[0].offsetWidth,
                    height: this.$element[0].offsetHeight
                });
                
                var actualWidth = $tip[0].offsetWidth,
                    actualHeight = $tip[0].offsetHeight,
                    gravity = maybeCall(this.options.gravity, this.$element[0]);
                
                var tp;
                switch (gravity.charAt(0)) {
                    case 'n':
                        tp = {top: pos.top + pos.height + this.options.offset, left: pos.left + pos.width / 2 - actualWidth / 2};
                        break;
                    case 's':
                        tp = {top: pos.top - actualHeight - this.options.offset, left: pos.left + pos.width / 2 - actualWidth / 2};
                        break;
                    case 'e':
                        tp = {top: pos.top + pos.height / 2 - actualHeight / 2, left: pos.left - actualWidth - this.options.offset};
                        break;
                    case 'w':
                        tp = {top: pos.top + pos.height / 2 - actualHeight / 2, left: pos.left + pos.width + this.options.offset};
                        break;
                }
                
                if (gravity.length == 2) {
                    if (gravity.charAt(1) == 'w') {
                        tp.left = pos.left + pos.width / 2 - 15;
                    } else {
                        tp.left = pos.left + pos.width / 2 - actualWidth + 15;
                    }
                }
                
                $tip.css(tp).addClass('tipsy-' + gravity);
                $tip.find('.tipsy-arrow')[0].className = 'tipsy-arrow tipsy-arrow-' + gravity.charAt(0);
                if (this.options.className) {
                    $tip.addClass(maybeCall(this.options.className, this.$element[0]));
                }
                
                if (this.options.fade) {
                    $tip.stop().css({opacity: 0, display: 'block', visibility: 'visible'}).animate({opacity: this.options.opacity});
                } else {
                    $tip.css({visibility: 'visible', opacity: this.options.opacity});
                }
            }
        },
        
        hide: function() {
            if (this.options.fade) {
                this.tip().stop().fadeOut(function() { $(this).remove(); });
            } else {
                this.tip().remove();
            }
        },
        
        fixTitle: function() {
            var $e = this.$element;
            if ($e.attr('title') || typeof($e.attr('original-title')) != 'string') {
                $e.attr('original-title', $e.attr('title') || '').removeAttr('title');
            }
        },
        
        getTitle: function() {
            var title, $e = this.$element, o = this.options;
            this.fixTitle();
            var title, o = this.options;
            if (typeof o.title == 'string') {
                title = $e.attr(o.title == 'title' ? 'original-title' : o.title);
            } else if (typeof o.title == 'function') {
                title = o.title.call($e[0]);
            }
            title = ('' + title).replace(/(^\s*|\s*$)/, "");
            return title || o.fallback;
        },
        
        tip: function() {
            if (!this.$tip) {
                this.$tip = $('<div class="tipsy"></div>').html('<div class="tipsy-arrow"></div><div class="tipsy-inner"></div>');
                this.$tip.data('tipsy-pointee', this.$element[0]);
            }
            return this.$tip;
        },
        
        validate: function() {
            if (!this.$element[0].parentNode) {
                this.hide();
                this.$element = null;
                this.options = null;
            }
        },
        
        enable: function() { this.enabled = true; },
        disable: function() { this.enabled = false; },
        toggleEnabled: function() { this.enabled = !this.enabled; }
    };
    
    $.fn.tipsy = function(options) {
        
        if (options === true) {
            return this.data('tipsy');
        } else if (typeof options == 'string') {
            var tipsy = this.data('tipsy');
            if (tipsy) tipsy[options]();
            return this;
        }
        
        options = $.extend({}, $.fn.tipsy.defaults, options);
        
        function get(ele) {
            var tipsy = $.data(ele, 'tipsy');
            if (!tipsy) {
                tipsy = new Tipsy(ele, $.fn.tipsy.elementOptions(ele, options));
                $.data(ele, 'tipsy', tipsy);
            }
            return tipsy;
        }
        
        function enter() {
            var tipsy = get(this);
            tipsy.hoverState = 'in';
            if (options.delayIn == 0) {
                tipsy.show();
            } else {
                tipsy.fixTitle();
                setTimeout(function() { if (tipsy.hoverState == 'in') tipsy.show(); }, options.delayIn);
            }
        };
        
        function leave() {
            var tipsy = get(this);
            tipsy.hoverState = 'out';
            if (options.delayOut == 0) {
                tipsy.hide();
            } else {
                setTimeout(function() { if (tipsy.hoverState == 'out') tipsy.hide(); }, options.delayOut);
            }
        };
        
        if (!options.live) this.each(function() { get(this); });
        
        if (options.trigger != 'manual') {
            var binder   = options.live ? 'live' : 'bind',
                eventIn  = options.trigger == 'hover' ? 'mouseenter' : 'focus',
                eventOut = options.trigger == 'hover' ? 'mouseleave' : 'blur';
            this[binder](eventIn, enter)[binder](eventOut, leave);
        }
        
        return this;
        
    };
    
    $.fn.tipsy.defaults = {
        className: null,
        delayIn: 0,
        delayOut: 0,
        fade: false,
        fallback: '',
        gravity: 'n',
        html: false,
        live: false,
        offset: 0,
        opacity: 0.8,
        title: 'title',
        trigger: 'hover'
    };
    
    $.fn.tipsy.revalidate = function() {
      $('.tipsy').each(function() {
        var pointee = $.data(this, 'tipsy-pointee');
        if (!pointee || !isElementInDOM(pointee)) {
          $(this).remove();
        }
      });
    };
    
    // Overwrite this method to provide options on a per-element basis.
    // For example, you could store the gravity in a 'tipsy-gravity' attribute:
    // return $.extend({}, options, {gravity: $(ele).attr('tipsy-gravity') || 'n' });
    // (remember - do not modify 'options' in place!)
    $.fn.tipsy.elementOptions = function(ele, options) {
        return $.metadata ? $.extend({}, options, $(ele).metadata()) : options;
    };
    
    $.fn.tipsy.autoNS = function() {
        return $(this).offset().top > ($(document).scrollTop() + $(window).height() / 2) ? 's' : 'n';
    };
    
    $.fn.tipsy.autoWE = function() {
        return $(this).offset().left > ($(document).scrollLeft() + $(window).width() / 2) ? 'e' : 'w';
    };
    
    /**
     * yields a closure of the supplied parameters, producing a function that takes
     * no arguments and is suitable for use as an autogravity function like so:
     *
     * @param margin (int) - distance from the viewable region edge that an
     *        element should be before setting its tooltip's gravity to be away
     *        from that edge.
     * @param prefer (string, e.g. 'n', 'sw', 'w') - the direction to prefer
     *        if there are no viewable region edges effecting the tooltip's
     *        gravity. It will try to vary from this minimally, for example,
     *        if 'sw' is preferred and an element is near the right viewable 
     *        region edge, but not the top edge, it will set the gravity for
     *        that element's tooltip to be 'se', preserving the southern
     *        component.
     */
     $.fn.tipsy.autoBounds = function(margin, prefer) {
		return function() {
			var dir = {ns: prefer[0], ew: (prefer.length > 1 ? prefer[1] : false)},
			    boundTop = $(document).scrollTop() + margin,
			    boundLeft = $(document).scrollLeft() + margin,
			    $this = $(this);

			if ($this.offset().top < boundTop) dir.ns = 'n';
			if ($this.offset().left < boundLeft) dir.ew = 'w';
			if ($(window).width() + $(document).scrollLeft() - $this.offset().left < margin) dir.ew = 'e';
			if ($(window).height() + $(document).scrollTop() - $this.offset().top < margin) dir.ns = 's';

			return dir.ns + (dir.ew ? dir.ew : '');
		}
	};
    
})(jQuery);

(function() {
	// Export the module
	window.AllArtists = {};
	window.AllArtists.createChart = function(config, data) {
		return new AllArtists(config, data);
	};

	function AllArtists(config, data) {

		/*
			Data holds the data about genre, here is a sample genre data
			{
			    "genre_name": "Punk Rock",
			    "artists": ["Green Day"],
			    "avg_vocab": 2535.0,
			    "num_artists": 1,
			    "total_vocab_len": 2535
			}
		*/
		this.data = data;

		// Data should sorted in descending order by the number of artists in that genre
		data.sort(descBy('num_artists'));

		this.$chart = $('#' + config.allChartCssId);

		this.addArtistsToChart();

	}

	AllArtists.prototype = {
		// Sorts and returns the param(array) names of artists in the mentioned configuration in constructor
		// No longer needed
		sortNames: function(names) {
			names.sort(); // [all the names sorted in ascending order]
			var sortedNames = [];
			var currentLetter = names[0][0]; // A
			var currentIndex = 0;
			names.forEach(function(name) {
				if (name[0] === currentLetter) {
					if (sortedNames.length === 0) sortedNames.push({
						startingLetter: currentLetter,
						names: [add_(name)]
					});
					else sortedNames[currentIndex].names.push(add_(name));
				} else {
					currentLetter = name[0];
					currentIndex++;
					sortedNames[currentIndex] = {
						startingLetter: currentLetter,
						names: [add_(name)]
					};
				}
			});
			return sortedNames;
		},


		// and that is how this is supposed to be done
		addArtistsToChart: function() {
			var template = Handlebars.compile(this.$chart.children('#template-allArtists').html());
			this.$chart.append(template(this.data));
		}
	};


	// Private methods
	// Converts 'A word' to 'A_word'
	function add_(word) {
		return word.split(" ").join("_");
	}

	/*
	 * Function : descBy(one of the property name of objects present in an array)
	 * Usage    : arrayHoldingNames.sort(descBy(firstName));
	 * ----------------------------------------------------------------------
	 * Used to sort any array of objects in descending order by a property name
	 * of the obejcts inside that array.
	 */
	function descBy(propertyName) {
		return function(m, n) {
			if (typeof m === 'object' && typeof n === 'object') {
				var propertyValueM = m[propertyName];
				var propertyValueN = n[propertyName];

				if (propertyValueM === propertyValueN) return 0;
				if (typeof propetyValueM === typeof propertyVaueN) {
					return (propertyValueM < propertyValueN ? 1 : -1);
				} else {
					return (typeof propertyValueM < propertyValueN ? 1 : -1);
				}

			} else {
				throw {
					type: 'Error',
					message: 'Expected objects got something else'
				};
			}
		};
	}


})();

(function() {

	// Exporting the module
	window.Artist = {};
	window.Artist.newArtist = function(artistName, artistData) {
		return new Artist(artistName, artistData);
	};

	// This module acts like an artist object
	// that will handle events on each artist object on the plot
	function Artist(artistName, artistData) {
		this.name = artistName;
		this.data = artistData;


		// Selector is simply name of the artist with whitespace replaced by _ , e.g.
		// Red Hot Chilli Peppers becomes Red_Hot_Chilli_Peppers
		this.selector = artistName.split(" ").join("_");
		// Points to the DOM element that holds the current artist
		this.$artist = $('#' + this.selector);

		// Track preview url
		// this.previewUrl = densest_tracks_data[this.selector] || "none";
		this.previewUrl = this.data.preview_mp3;


		// Set the background of the artist circle
		this.$artist.css('background-image', 'url(img/artist_images_40px/' + this.selector + '.jpg)');

		// Template that renders the content inside the tooltip
		this.tooltipTemplate = $.trim($('#tooltipTemplate').html());

		// The total number of artists the data has
		this.numArtists = 93; // currently hard coded

		// Enum that holds the state of the tooltip
		this.tooltipStates = {
			COMPACT: 1,
			EXPANDED: 2
		};

		// Variables that hold the configuration of the tooltip that is used
		// when interating with the artist like clicking it
		this.currentTooltipState= this.tooltipStates.COMPACT;

		this.tooltipOriginalContent = $('#tooltipTemplate').html()
			.replace(/{{rank}}/i, this.data.rank_vocab)
			.replace(/{{artistName}}/i, (this.data.name === "The Black Eyed Peas") ? "T.B.E.P" : this.data.name)
			.replace(/{{vocab}}/i, window.VocabPlot.formatWithCommas(this.data.vocab_len))
			.replace(/{{total}}/i, this.numArtists);

		this.tooltipExpandedContent = $('#tooltipTemplateExpanded').html()
			.replace(/{{rank}}/i, this.data.rank_vocab)
			.replace(/{{artistName}}/i, (this.data.name === "The Black Eyed Peas") ? "T.B.E.P" : this.data.name)
			.replace(/{{vocab}}/i, window.VocabPlot.formatWithCommas(this.data.vocab_len))
			.replace(/{{total}}/i, this.numArtists)
			.replace(/{{sales}}/i, this.data.certified_sales)
			.replace(/{{rank_sales}}/i, this.data.rank_sales)
			.replace(/{{learning_rate}}/i, Math.floor(this.data.learning_rate));


		// Initialize events
		this.events.hover.call(this);
		this.events.click.call(this);
	}

	Artist.prototype = {
		// Dims the artist on the plot by decreasing opacity
		dim: function() {
			this.$artist.removeClass('normalArtist');
			this.$artist.addClass('dimArtist');
		},

		// Undims the artist
		undim: function() {
			this.$artist.removeClass('dimArtist');
			this.$artist.addClass('normalArtist');
		},

		// Highlights the artist on the plot by adding a colored border
		// and showing its tooltip
		highlight: function() {
			if (!this.$artist.hasClass('highlightedArtist')) {
				this.$artist.addClass('highlightedArtist');
				this.$artist.tipsy('show');
			}
		},

		//  Removes highlight from the artist
		unhighlight: function() {
			if (this.$artist.hasClass('highlightedArtist')) {
				this.$artist.removeClass('highlightedArtist');
				this.$artist.tipsy('hide');
			}
		}
	};

	// Event handler on artist object
	Artist.prototype.events = {
		click: function() {
			var that = this;
			this.$artist.on('click', function() {
				var musicAlreadyPlaying = $(this).children('#embed_player').length >= 1;
				// Start playing the music if it isn't already playing otherwise get rid of it 
				if(musicAlreadyPlaying){ // stop the music
					$(this).children('#embed_player').remove();
					$(this).children('.playIconOverlay').children('.audio_control_icon').toggle();
				}else{
					$(this).append('<embed id="embed_player" src="' + that.previewUrl + '" autostart="true" hidden="true"></embed>');				
					$(this).children('.playIconOverlay').children('.audio_control_icon').toggle();
				}
			});
		},

		// Show a tooltip on hover
		hover: function() {
			var that = this;
			this.$artist.tipsy({
				gravity: (that.data.name === 'Eminem') ? 'n' : 's',
				html: true,
				opacity: 1,
				offset: 3,
				title: function() {
					return that.tooltipExpandedContent;
				}
			});

			// We will add a play button as an overlay over the artist image on hover 
			this.$artist.on('mouseenter', function() {
				$(this).append('<div class = "playIconOverlay"><span class="audio_control_icon"><img src="img/icons/icon_play.png" alt="Play" /> </span> <span class="audio_control_icon" style="display: none;"> <img src="img/icons/icon_stop.png" alt="Stop" /> </span> </div> ');
			});

			this.$artist.on('mouseleave', function() {
				$(this).children().remove();
			});
		}

	};

})();

(function() {

	// Add contractability to the allArtists chart
	var $window = $(window);

	expandButton = {
		init: function(config) {
			this.button = config.button;
			this.target = config.target;
			// Variables that'll help in maintaining the positions while scrolling
			this.initialButtonPos = this.button.offset();
			this.scrollLimits = this.target.offset();
			// Initialize the click listener
			this.button.on('click', this.expandListToggle);
		},

		expandListToggle: function() {
			var that = expandButton;
			expandButton.target.toggleClass('expanded');
			if (expandButton.target.hasClass('expanded')) { // The list is expanded following block contracts it
				expandButton.target.children('.overlay').remove();
				$(this).text('SHOW LESS');

				// Fix the button at the bottom of the page
				that.attachButtonToBottom($(this));
			} else { // Following block expands the list 
				expandButton.target.prepend($('<div></div>', {
					class: 'overlay'
				}));
				$(this).text('SHOW ALL');

				that.restoreButtonPosition($(this));

				// Scroll to the next article section
				if ($window.scrollTop() > expandButton.getLowerScrollLimit())
					$window.scrollTop(1100);
			}

		},

		attachButtonToBottom: function(button) {
			button.addClass('attachedToBottom')
			button.css({
				top: ($window.height() - 45) + 'px'
			});
		},

		restoreButtonPosition: function(button) {
			var that = this;
			button.removeClass('attachedToBottom');
			console.log(that.target.height(), that.target.width(), that.target.offset().top);
			button.css({
				position: 'absolute',
				top: that.target.offset().top + 164 + 'px'
			});
		},

		getUpperScrollLimit: function() {
			return this.scrollLimits.top;
		},

		getLowerScrollLimit: function() {
			return (this.scrollLimits.top + this.target.height() - this.button.height());
		}


	};


	// Set up the scroll listener on the window to maintain the position of the button
	// Not the best solution but will work for now ...
	// TODO : fix this
	$window.on('scroll', function() {
		var scrollPos = $window.scrollTop();
		if (scrollPos > (expandButton.getLowerScrollLimit() - $window.height() + 100)) {
			if(expandButton.button.hasClass('attachedToBottom')){
				expandButton.button.removeClass('attachedToBottom');
				expandButton.button.css({
					position: 'absolute',
					top: expandButton.getLowerScrollLimit() - 480 + 'px'
				});
			}
		}else if(scrollPos < (expandButton.getLowerScrollLimit() - $window.height() + 100) && $('.overlay').length === 0) {
			expandButton.attachButtonToBottom(expandButton.button);
		}
	});
})();
(function() {

	window.GenrePlot = {
		init: function(config) {
			this.data = genre_data;

			// Sort the data in descending order by the avg_vocab for a clean visualization
			this.data.sort(descBy('avg_vocab'));

			this.container = config.container;
			this.scaleContainer = d3.select('#' + config.scaleContainerCssId);
			// If I am not wrong the scale legend is the numbers written around ticks
			// like |200   |300 e.t.c may be I am wrong who knows?
			this.legendContainer = d3.select('#' + config.legendContainerCssId);

			this.xScale = d3.scale.linear()
				.domain([0, d3.max(this.data, function(d) {
					return d.avg_vocab;
				})])
				.range([0, $('#' + config.scaleContainerCssId).width()]);
			// .range([0, 510]);


			// Adding all the names of the genres to the plot using templating
			config.namesContainer.append(Handlebars.compile(config.genreNameTemplate)(this.data));

			// To make the scale take up the whole height of the plot
			this.scaleContainer.style('height', this.container.height() + 'px');

			// Because of d3 quirks we will have to create a separate svg container to hold the
			// scale lengends sigh!

			this.drawPlot([500, 2000, 3500, 5000]);

			// Very hacky solution for making the legend sticky, will integrate with the expand button
			// TODO : fix this
			var $window = $(window);
			var $legendHolder = $('#' + config.legendContainerCssId);
			var pos = $legendHolder.offset();
			var that = this;
			$window.on('scroll', function() {
				var containerPos = that.container.offset();
				var upperLimit = containerPos.top;
				var lowerLimit = upperLimit + that.container.height() - 30;
				var scrollPos = $window.scrollTop();
				if (scrollPos > upperLimit && scrollPos < lowerLimit) {
					$legendHolder.css({
						position: 'fixed',
						top: '30px',
						left: pos.left
					});
				} else {

					$legendHolder.css({
						position: 'absolute',
						top : containerPos.top - 300
					});
				}

			});
		},

		drawPlot: function(divisions) {
			this.drawBars();
			this.drawScale(divisions);
			this.drawSeparators();
			this.drawScaleLegend(divisions);
		},

		drawScale: function(divisions) {
			// let us fucking put the divisions in
			var that = this;
			var scaleColor = '#303030';

			this.scaleContainer
				.selectAll('line').data(divisions).enter().append('line')
				.attr('x1', function(d) {
					return that.xScale(d);
				})
				.attr('x2', function(d) {
					return that.xScale(d);
				})
				.attr('y1', 0)
				.attr('y2', this.container.height())
				.style('stroke', scaleColor)
				.style('stroke-width', 1);

			// this.drawScaleLegend(divisions);
		},

		drawScaleLegend: function(divisions) {
			var that = this;
			var legendRectWidth = 100;
			var legendRectHeight = 30;
			var legendFill = '#303030';
			var legendTextFill = '#FFFFFF';
			var leftPadding = 8;

			this.legendContainer
				.selectAll('rect').data(divisions).enter().append('rect')
				.attr('x', function(d) {
					// The original x position is adjusted for aesthetic purposed using trial and error
					return that.xScale(d) - 0.5;
				})
				.attr('y', 0)
				.attr('width', legendRectWidth)
				.attr('height', legendRectHeight)
				.style('fill', legendFill);

			this.legendContainer
				.selectAll('text').data(divisions).enter().append('text')
				.attr('x', function(d) {
					return (that.xScale(d) + leftPadding);
				})
				.attr('y', 21)
				.text(function(d) {
					return (d + ' WORDS');
				})
				.attr('fill', legendTextFill)
				.style('font-family', 'Oswald');
		},

		drawBars: function() {
			var that = this;
			var spacing = 25;
			var barHeight = 30;
			var marginTop = 13;
			var barColor = '#D6C06D';

			this.scaleContainer
				.selectAll('rect').data(this.data).enter().append('rect')
				.attr('x', 0)
				.attr('y', function(d, i) {
					return (i * (barHeight + spacing) + marginTop);
				})
				.attr('width', function(d) {
					return that.xScale(d.avg_vocab);
				})
				.attr('height', barHeight)
				.style('fill', barColor);
			// we will also show text inside the bars

		},

		drawSeparators: function() {
			var that = this;

			// D3 doesn't like same svg shapes drawn on the same container
			// through different loops, so when we come to this method after
			// drawing the scales (which are lines too) we're 4(in curent situation) short of data,
			// that is the index for us will not go from 0 - data.length but from 4 - data.length
			// we won't be able to draw required number of separators in that condition.
			// Since we're not using anything inside the data here, we will create a sample data
			// holding required number of virtual elements
			// the -1 is because we don't want the last separator as our container already has
			// a border-bottom
			// NOTE: If you change the number of scale lines in drawScale(), you might have
			// to make adjustments here too via Trial and Error.
			var sampleData = new Array(this.data.length + 4 - 1);

			var separatorColor = '#BABABA';
			var marginTop = 54.5;
			var spacing = 55;

			this.scaleContainer
				.selectAll('line').data(sampleData).enter().append('line')
				.attr('y1', function(d, i) {
					return ((i - 4) * spacing) + marginTop;
				})
				.attr('y2', function(d, i) {
					return ((i - 4) * spacing) + marginTop;
				})
				.attr('x1', 0)
				.attr('x2', function(d) {
					return that.xScale(6500);
				})
				.style('stroke', separatorColor)
				.style('stroke-width', 1);


		}


	};
	/*
	 * Function : descBy(one of the property name of objects present in an array)
	 * Usage    : arrayHoldingNames.sort(descBy(firstName));
	 * ----------------------------------------------------------------------
	 * Used to sort any array of objects in descending order by a property name
	 * of the obejcts inside that array.
	 */
	function descBy(propertyName) {
		return function(m, n) {
			if (typeof m === 'object' && typeof n === 'object') {
				var propertyValueM = m[propertyName];
				var propertyValueN = n[propertyName];

				if (propertyValueM === propertyValueN) return 0;
				if (typeof propetyValueM === typeof propertyVaueN) {
					return (propertyValueM < propertyValueN ? 1 : -1);
				} else {
					return (typeof propertyValueM < propertyValueN ? 1 : -1);
				}

			} else {
				throw {
					type: 'Error',
					message: 'Expected objects got something else'
				};
			}
		};
	}


})();

(function() {

	// Augment the array prototype to accept only unique strings
	Array.prototype.pushUniqueString = function(string) {
		if (this.indexOf(string) > -1) return;
		else this.push(string);
	};

	polyglotArtists = {
		init: function(config, data) {

			this.uniqueLanguages = this.getUniqueLanguages(data);
			this.config = config;

			// Add the artists to the div 
			var polyglotTemplate = Handlebars.compile(config.template);
			config.container.append(polyglotTemplate(data));

			// Add the languages
			var languageTemplate = Handlebars.compile(config.languagesTemplate);
			config.languagesContainer.append(languageTemplate(this.uniqueLanguages));


			// We will have to find a way so that you know the artists we hover on highlights the relevant languages 
			$('.polyglotImage').each(function() {
				$(this).on('mouseover', function() {
					var id = $(this).attr('id');
					data.forEach(function(polyglot) {
						var name = 'polyglot_' + polyglot.name;
						if (id === name) {
							polyglotArtists.highlightLanguages(polyglot.languages);
						}
					});
				});
			});

			$('.polyglotImage').on('mouseout', function() {
				$('.polyglotLanguage').each(function() {
					$(this).removeClass('languageHighlight');
				});
			});


		},

		getUniqueLanguages: function(data) {
			var polyglotLanguages = [];
			data.forEach(function(polyglot) {
				polyglot.languages.forEach(function(language) {
					polyglotLanguages.pushUniqueString(language);
				});
			});
			return polyglotLanguages;
		},

		highlightLanguages: function(languageNames) {
			languageNames.forEach(function(language) {
				polyglotArtists.config.languagesContainer.children('#' + language).addClass('languageHighlight');
			});
		}
	};

})();
(function() {

	// Export the module
	window.VocabPlot = {};
	// Export this function for use in Artist.js file
	window.VocabPlot.formatWithCommas = formatWithCommas;
	window.VocabPlot.newPlot = function(config) {
		return new VocabPlot(config);
	};

	function VocabPlot(config) {
		this.config = config;

		// Data for the plot
		this.data = this.config.data;

		this.$plot = $('#' + this.config.cssId);
		this.scale = d3.select('#' + this.config.scaleCssId);
		// Font family for the text that is show on on the graph
		this.fontFamily = 'Oswald';

		this.$nothingFoundMessage = $('#nothingFoundMessage');

		this.width = this.$plot.width();
		this.height = this.$plot.height();

		// A collection of artist (Artist Objects) on the plot
		this.artists = {};

		this.addArtistsToPlot();
		// Initialize the searchField
		this.search.init(this, this.config.searchFieldCssId);
	}

	VocabPlot.prototype = {

		// Method to add new artist to the plot
		addArtistsToPlot: function() {
			var that = this; // VocabPlot
			d3.select('#artistCircleContainer')
				.selectAll(this.config.artistCircleCssClass)
				.data(this.data)
				.enter()
				.append('div')
				.attr('id', function(d) {
					return d.name.split(" ").join("_");
				})
				.classed(this.config.artistCircleCssClass, true)
				.each(function(d) {
					that.artists[d.name] = Artist.newArtist(d.name, d);
				})
			// to avoid stutter on load
			.transition().duration(300)
				.style('opacity', 1);

			// Mode by which the artist should be arranged in the plot
			this.arrangeByVocabulary();
		},

		arrangeByVocabulary: function() {
			var that = this;

			var vocabScale = d3.scale.linear().domain([0, 10000]).range([this.height, 0]);
			drawScale.call(this, vocabScale, ' words', [809, 2000, 4000, 6000, 8000], 2677);

			d3.select('#artistCircleContainer').selectAll('.' + this.config.artistCircleCssClass)
				.data(this.data)
				.style('top', function(d) {
					return ((vocabScale(d.vocab_len)) - 20) + 'px';
				})
				.style('left', function(d) {
					return (d.x + d.vocab_x_offset - 17.5) + 'px';
				});

		},
		arrangeBySales: function() {
			var that = this;

			var salesScale = d3.scale.linear().domain([0, 300])
				.range([this.height, 0]);
			drawScale.call(this, salesScale, 'M', [18.9, 50, 100, 150,200, 250 ]);

			d3.select('#artistCircleContainer').selectAll('.' + this.config.artistCircleCssClass)
				.data(this.data)
				.style('top', function(d) {
					return ((salesScale(d.certified_sales)) - 20) + 'px';
				})
				.style('left', function(d, i) {
					return (d.x + d.sales_x_offset - 17.5) + 'px';
				});

		},

		// Operations styles of the artist circles on the plot
		dimAllArtists: function() {
			for (var artistName in this.artists)
				this.artists[artistName].dim();
		},

		undimAllArtists: function() {
			for (var artistName in this.artists) {
				this.artists[artistName].undim();
				this.artists[artistName].unhighlight();
			}
		},

		unhighlightAllArtists: function() {
			for (var artistName in this.artists) {
				this.artists[artistName].unhighlight();
			}
		},

		// Highlights the artists whose names are supplied in the artistNames(argument) array
		highlightArtists: function(artistNames) {
			var that = this; // VocabPlot

			if(artistNames.length === 0) this.showNothingFoundMessage();
			else this.hideNothingFoundMessage();
			
			artistNames.forEach(function(artistName) {
				that.artists[artistName].highlight();
			});
		},

		showNothingFoundMessage: function() {
			this.$nothingFoundMessage.css('display', 'block');
		},

		hideNothingFoundMessage: function() {
			this.$nothingFoundMessage.css('display', 'none');
		}

	};


	// Handles the implementation and working of the search field on the plot
	VocabPlot.prototype.search = {
		init: function(plot, searchFieldCssId) {
			// Caching
			this.searchField = $('#' + searchFieldCssId);
			this.plot = plot; // Cache the plot on which this search field is located
			this.artistNames = Object.keys(this.plot.artists);

			this.searchField.autocomplete({
				source: [this.artistNames],
				highlight: true,
				limit: 8
			});

			this.searchField.focus(function() {
				plot.dimAllArtists();

				// Scroll the visualization into view
				var offset = plot.$plot.offset();
				$('html, body').animate({
					scrollTop: offset.top,
				}, 200);
			});

			this.searchField.blur(function() {
				plot.undimAllArtists();
				$(this).val('');
				plot.hideNothingFoundMessage();
			});

			var that = this; // search oject
			// Debounced the following function for efficiency
			var timeout;
			this.searchField.keyup(function(event) {
				clearTimeout(timeout);
				timeout = setTimeout(function() {
					// Detect the esc. key
					if (event.keyCode === 27) {
						that.searchField.blur();
						return;
					}
					that.highlightMatchingArtists();
				}, 250);
			});
		},

		// TODO : debounce the following function
		highlightMatchingArtists: function() {
			var that = this;
			var matchingArtists = this.artistNames.filter(function(name) {
				var searchFieldValue = that.searchField.val();
				// If the search is a number then highlight the artist by rank
				if (searchFieldValue) {
					if ($.isNumeric(searchFieldValue)) {
						return (that.plot.artists[name].data.rank_vocab === Number(searchFieldValue));
					} else {
						return (name.toUpperCase().indexOf(searchFieldValue.toUpperCase()) === 0);
					}
					return false;
				}
			}).slice(0, 8);

			this.plot.unhighlightAllArtists();
			this.plot.highlightArtists(matchingArtists);
		}
	};

	// Funciton : drawScale(array of numbers, each number representing a tick on scale, average value)
	function drawScale(scale, suffix, scaleDivisions, average) {

		// Just empty the scale before drawing anything on it 
		$('#' + this.config.scaleCssId).children().remove();

		var that = this;
		// Color of general numbers and lines
		var scaleColor = "#FFFFFF";
		var averageColor = "#303030";
		// Length of each tick on the scale ( the white line)
		var scaleLeftPadding = 25;
		var tickLength = 0.98 * this.width;

		// The amount of separation the text and tick
		var legendTickSeparation = 12;

		// Draw the lines on the scale
		this.scale
			.selectAll('line').data(scaleDivisions).enter().append('line')
			.attr('x1', scaleLeftPadding)
			.attr('x2', tickLength)
			.attr('y1', function(d) {
				return scale(d);
			})
			.attr('y2', function(d) {
				return scale(d);
			})
			// .attr('stroke-dasharray', '1, 5')
			.style('stroke', scaleColor)
			// .style('stroke', 'rgba(255, 255, 255, 0.4)')
			.style('stroke-width', 1);

		// Add legend to the scale
		this.scale
			.selectAll('text')
			.data(scaleDivisions).enter().append('text')
			.attr('x', scaleLeftPadding)
			.attr('y', function(d) {
				return (scale(d) - legendTickSeparation);
			})
			.text(function(d) {
				return (formatWithCommas(d) + suffix);
			})
			.attr('fill', scaleColor)
			.attr('font-size', 18);

		// Drawing the average text and ticks
		if (average) {
			this.scale
				.append('line')
				.attr('x1', scaleLeftPadding)
				.attr('x2', tickLength)
				.attr('y1', scale(average))
				.attr('y2', scale(average))
				.style('stroke', averageColor)
				.style('stroke-width', 1);

			this.scale
				.append('text')
				.text(formatWithCommas(average) + suffix)
				.attr('fill', averageColor)
				.attr('font-size', 16)
				.attr('x', scaleLeftPadding)
				.attr('y', scale(average) - (legendTickSeparation - 5));

			this.scale
				.append('text')
				.text('Average')
				.attr('fill', averageColor)
				.attr('font-size', 16)
				.attr('x', scaleLeftPadding)
				.attr('y', scale(average) - (2.1 * legendTickSeparation));
		}
	}


	// Adds commas to a large number at appropriate places
	function formatWithCommas(x) {
		var parts = x.toString().split(".");
		parts[0] = parts[0].replace(/\B(?=(\d{3})+(?!\d))/g, ",");
		return parts.join(".");
	}

})();
(function() {
    'use strict';

    // TODO : Make a list of all the absolutely positioned elements and adjust their position on resize

    // Hnadlebar helpers

    // Handlebar helper to increment int by 1
    // Used in displaying ranks starting from 1 instead of 0
    Handlebars.registerHelper("inc", function(value, options) {
        return parseInt(value) + 1;
    });

    // Replaces spaces with underscores in a word
    Handlebars.registerHelper("undy", function(value, options) {
        return (value.split(" ").join("_"));
    });

    // Transform string to uppercase
    Handlebars.registerHelper("upperCase", function(value, options) {
        return (value.toUpperCase());
    });

    // Not Handlebar helpers, everything else 

    vocab_data.forEach(function(artist, index) {
        artist.x = $('#artistCircleContainer').width() / 2; // was supposed to be pulled from plot but circular dependency is a bitch
    });

    // Initialize the plot for the main visulaization
    // We will need a lot more options and stuff here and for changing the scales and stuff like that too 
    var plot = VocabPlot.newPlot({
        // Css selectors for the elments on the plot
        cssId: 'vocab_plot',
        scaleCssId: 'vocab_plot_scale',
        searchFieldCssId: 'locateArtist',
        artistCircleCssClass: 'artistContainer',
        data: vocab_data
    });

    // Plot needs to be initialized before initializing this
    // Initializing the list that shows all the artists
    var allArtistsChart = AllArtists.createChart({
        allChartCssId: 'allArtistsContainer'
    }, genre_data);

    // Add tooltips to the artists in the AllArtist chart
    $('.letterArtistImage').each(function() {
        var $self = $(this);
        $self.tipsy({
            title: function() {
                return $self.attr('id').split("_").join(" "); // Replaces the underscores in name with spaces
            },
            gravity: 's',
            opacity: 1,
            offset: 0
        });
    });

    expandButton.init({
        button: $('#btn_expandList'),
        target: $('#allArtistsContainer')
    });


    // Data for the polyglots
    var polyglotData = [{
            name: 'Julio_Iglesias',
            languages: ['Spanish', 'German', 'English', 'French', 'Italian', 'Portuguese', 'Russian']
        }, {
            name: 'Andrea_Bocelli',
            languages: ['Spanish', 'English', 'French', 'Italian', 'Portuguese']
        }, {
            name: 'Bz',
            languages: ['Japanese', 'English']
        }, {
            name: 'Gloria_Estefan',
            languages: ['English', 'Spanish', 'French']
        }

    ];


    polyglotArtists.init({
        container: $('#polyglotImages'),
        languageContainer: $('#polyglotLanguages'),
        languagesContainer: $('#polyglotLanguages'),
        template: $('#template-polyglots').html(),
        languagesTemplate: $('#template-polyglots-languages').html(),
        artistContainer: $('.polyglotImage') // TODO :  this thing is not getting exported properly, fix this
    }, polyglotData);


    // Some positional fixes
    // center the last image :D (even Google's homepage uses <center> so what)
    $('.polyglotImage:last-child').wrap('<center></center>');
    $('.polyglotImage').eq(0).css('margin-left', '0');

    GenrePlot.init({
        container: $('#genrePlot'),
        scaleContainerCssId: 'genrePlotScale',
        legendContainerCssId: 'genreLegend',
        namesContainer: $('#genreNames'),
        genreNameTemplate: $('#genre-names-template').html()
    });



})();